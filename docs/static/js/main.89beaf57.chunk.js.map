{"version":3,"sources":["TextLink.js","ArticleSearch.js","Navbar.js","Layout.js","CopyrightFooter.js","DhsArticle.js","ArticlesList.js","About.js","HdsThematicIndexation.js","Routing.js","index.js"],"names":["getLinkSubProperty","textLink","property","subproperty","undefined","getLinkAnnotationProperty","getLinkDhsId","dhsId","dhsid","href","dhsUrl","match","decomposeDhsUrl","getWikipediaUrlFromPageId","language","pageId","replace","dhsLinkClass","originalDhsLinkClass","wikipediaLinkClass","NoTextLink","className","children","noLinkClass","DhsArticleLink","originalLink","getDhsUrlFromDhsId","useParams","to","RealDhsArticleLink","url","getRealDhsUrlFromDhsId","target","WikipediaTextLink","WikidataTextLink","TextLink","textlink","origin","wikipediaUrl","getLinkWikipediaUrl","wikidataUrl","getLinkWikidataUrl","ArticleSearch","navigate","useNavigate","useSearchParams","searchParams","useState","get","searchTerm","setSearchTerm","useEffect","pathname","createSearchParams","q","Form","id","onSubmit","event","preventDefault","stopPropagation","document","getElementById","value","Control","type","defaultValue","name","Button","variant","LanguageChooser","links","filter","l","map","urlToLng","window","location","split","NavDropdown","Item","toUpperCase","title","Alert","NavBarHeader","Navbar","expand","Toggle","Collapse","Nav","Link","CenteredLayout","Container","Row","Col","lg","CopyrightFooter","console","log","TextWithLinks","text","textLinks","length","sort","a","b","start","previousTextLink","end","textsAndLinks","i","previousTextLinkEnd","substring","warn","x","flat","push","TextBlock","tag","DhsArticleContent","article","baseurl","text_blocks","search_result_name","logoSize","wikipedia_page_title","wikidata_url","wikipediaLink","src","width","height","wikidataLink","externalLinks","textBlocks","tb","text_links","ThematicIndexation","tags","t","DhsArticle","articleJsonUrl","setArticle","fetch","then","json","newArticle","catch","lastArticle","MissingDhsArticle","doSearch","useCallback","onClick","history","back","ArticlesListItem","articleTitle","ArticlesList","indexJsonUrl","index","setIndex","completeIndex","setCompleteIndex","query","lowerCaseSearchTerm","toLowerCase","aid","indexOf","searchInIndex","loadedIndex","item","AboutPage","rel","categories","color","active","HdsThematicIndexation","treeDataJsonUrl","setChildrenVisible","d","childrenVisible","computeCategoriesVisibleStatistics","visibleStatistics","visibleTotalStatistics","forEach","c","statistics","total_statistics","recursiveFunctionCall","recursiveFunc","childrenResult","root","margin","duration","tree","d3","size","diagonal","parent","y","svg","attr","append","currentArticlesList","getTotalStatisticAsProportionFromParent","category","par","total","data","reduce","getStackedBarChartOffset","valueFunc","accu","update","source","getSource","nodes","computeNbVisibleArticles","each","depth","node","selectAll","descendants","nodeClass","extraClasses","nodeEnter","enter","y0","x0","on","nodeClick","style","gStackedBarChartEnter","classed","transition","select","nodeUpdate","gStackedBarChartUpdate","nodeExit","exit","remove","link","slice","insert","children_statistics","articles","toggleChildrenVisible","articlesList","newHTML","facet","full_name","innerHTML","setArticlesList","resp","treeData","startingSource","categoriesLegend","categoryDiv","categoryCheckbox","categoryLabel","e","checked","n","spatial","themes","people","families","Route404","tadu","Routing","basename","process","path","element","exact","ReactDOM","render"],"mappings":"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","file":"static/js/main.89beaf57.chunk.js","sourcesContent":["import {\n    Link,\n    useParams\n  } from \"react-router-dom\";\n\n\n\n/*\n * Different text links:\n * - dhs-article\n * - wikipedia\n * - wikidata\n * \n * needs:\n * - triage between the 3 different types\n * - choose to force a priority order\n * - \n * \n * triage:\n * - dhsArticle: has .dhsid property\n * - wikidata: has .wiki.item not null property\n * - wikipedia: has .wiki.articleLNG not null property\n * - unidentified identity: none of the above\n * \n * \n * \n * \n */\n\nfunction getLinkSubProperty(textLink, property, subproperty){\n    if( textLink[property] &&\n        textLink[property][subproperty] &&\n        textLink[property][subproperty]!=\"\" &&\n        textLink[property][subproperty]!==undefined &&\n        textLink[property][subproperty]!==null\n    ){\n        return textLink[property][subproperty]        \n    }\n    return false\n\n}\n\nfunction getLinkWikiProperty(textLink, property){\n    return getLinkSubProperty(textLink,\"wiki\", property)\n}\n\nfunction getLinkAnnotationProperty(textLink, property){\n    return getLinkSubProperty(textLink,\"annotation\", property)\n}\n\n\nfunction getLinkAnnotationExtraField(textLink, extraField){\n    const extraFields = getLinkAnnotationProperty(textLink, \"extra_fields\")\n    return extraFields? extraFields[extraField] : false\n}\n\nexport function getDhsUrlFromDhsId(dhsId, language=\"de\"){\n    return (language? \"/\"+language : \"\")+\"/articles/\"+dhsId\n}\nexport function getRealDhsUrlFromDhsId(dhsId, language=\"de\"){\n    return \"https://hls-dhs-dss.ch\"+ (language? \"/\"+language : \"\")+\"/articles/\"+dhsId\n}\nexport function decomposeDhsUrl(dhsUrl){\n    const urlRegex = /\\/(\\w+)?\\/?articles\\/(.+?)\\/(\\d{4}-\\d{2}-\\d{2})?/\n    return dhsUrl.match(urlRegex) // 0: whole path, 1: language, 2: dhs id, 3: version\n}\nexport function getDhsIdFromDhsUrl(dhsUrl){\n    return decomposeDhsUrl(dhsUrl)[2]\n}\n\n/** dhsArticle: has .dhsid property\n * \n * @param {*} textLink \n * @returns {str or null}: this textLink dhs-id or false if no dhs id in this link (doesn't link to a dhs article)\n */\n export function getLinkDhsId(textLink){\n    let dhsId = textLink.dhsid && textLink.dhsid!=\"\" && textLink.dhsid!==undefined && textLink.dhsid!==null? textLink.dhsid : false\n    // if the dhsId field is missing, the dhsId is sometimes in the href field only\n    if(!dhsId){\n        dhsId = textLink.href && textLink.href!=\"\" && textLink.href!==undefined && textLink.href!==null? getDhsIdFromDhsUrl(textLink.href) : false    \n    }\n    return dhsId\n}\n/** dhsArticle: has .dhsid property\n * \n * @param {*} textLink \n * @returns {str or null}: this textLink dhs-id or false if no dhs id in this link (doesn't link to a dhs article)\n */\nexport function getLinkDhsUrl(textLink, language=false){\n    const dhsId = getLinkDhsId(textLink)\n    return dhsId? (language? \"/\"+language : \"\")+\"/articles/\"+dhsId : false\n}\n\nconst wikipediaBaseUrl = \"https://<LNG>.wikipedia.org/wiki/\"\nconst wikipediaBaseUrlFromPageId = \"https://<LNG>.wikipedia.org/?curid=\"\nexport const getWikipediaUrlFromPageId = (language, pageId) => wikipediaBaseUrlFromPageId.replace(\"<LNG>\",language)+pageId\n/**  wikipedia: has .wiki.articleLNG not null property\n * \n * @param {*} textLink \n * @returns {str or null}: this textLink wikipediaUrl or false if no wikipediaUrl in this link\n */\nexport function getLinkWikipediaUrl(textLink, language){\n    const pageId = getLinkAnnotationProperty(textLink, \"wikipedia_page_id\")\n    return pageId? getWikipediaUrlFromPageId(language, pageId) : false\n}\n\n/**  wikidata: has .wiki.item not null property\n * \n * @param {*} textLink \n * @returns {str or null}: this textLink wikidataUrl or false if no wikidataUrl in this link\n */\nexport function getLinkWikidataUrl(textLink){\n    return getLinkAnnotationProperty(textLink, \"wikidata_entity_url\")\n}\n\n\nexport const noLinkClass = \"no-text-link\"\nexport const dhsLinkClass = \"dhs-dhs-link\"\nexport const originalDhsLinkClass = \"dhs-original-dhs-link\"\nexport const realDhsLinkClass = \"dhs-real-dhs-link\"\nexport const wikipediaLinkClass = \"dhs-wikipedia-link\"\nexport const wikidataLinkClass = \"dhs-wikidata-link\"\n\n\nexport function NoTextLink({className=\"\", children=[]}){\n    return <span className={noLinkClass+\" \"+className}>{children}</span>\n}\n\n\n\nexport function DhsArticleTextLink({dhsUrl = \"\", children=[]}){\n    return <Link className={dhsLinkClass} to={dhsUrl}>{children}</Link>\n}\n\nexport function DhsArticleLink({dhsId = \"\", children=[], originalLink=false}){\n    const { language } = useParams();\n    const dhsUrl = getDhsUrlFromDhsId(dhsId, language)\n    return <Link className={dhsLinkClass+\" \"+(originalLink? originalDhsLinkClass: \"\")} to={dhsUrl}>{children}</Link>\n}\nexport function RealDhsArticleLink({dhsId = \"\", language=\"de\", children=[]}){\n    const url = getRealDhsUrlFromDhsId(dhsId, language)\n    return <a className={realDhsLinkClass} href={url} target=\"_blank\">{children}</a>\n}\n\n\n\nexport function WikipediaTextLink({url = \"\", children=[]}){\n    return <a className={wikipediaLinkClass} href={url} target=\"_blank\">{children}</a>\n}\n\n\n\nexport function WikidataTextLink({url = \"\", children=[]}){\n    return <a className={wikidataLinkClass} href={url} target=\"_blank\">{children}</a>\n}\n\n\n\nexport function TextLink({\n    textlink = {},\n    language=\"de\",\n    children = []\n}){\n    const textLink = textlink\n    //console.log(\"<TextLink/> textLink:\", textLink, \"\\nlanguage: \", language, \"\\nchildren: \", children,\"\\nzulu: \",zulu)\n    const dhsId = getLinkDhsId(textLink)\n    if(dhsId){\n        return <DhsArticleLink dhsId={dhsId} originalLink={textLink.origin!==\"entity_fishing\"}>{children}</DhsArticleLink>\n    }\n    /*const dhsUrl = getLinkDhsUrl(textLink, language)\n    if(dhsUrl){\n        return <DhsArticleTextLink dhsUrl={dhsUrl}>{children}</DhsArticleTextLink>\n    }*/\n    const wikipediaUrl = getLinkWikipediaUrl(textLink, language)\n    //console.log(\"TextLink no DHS id wikipediaUrl=\",wikipediaUrl, \"textLink.annotation.wikipedia_page_title: \",textLink.annotation.wikipedia_page_title, \"textLink.annotation.wikipedia_page_id: \",textLink.annotation.wikipedia_page_id)\n    if(wikipediaUrl){\n        return <WikipediaTextLink url={wikipediaUrl}>{children}</WikipediaTextLink>\n    }\n    const wikidataUrl = getLinkWikidataUrl(textLink)\n    if(wikidataUrl){\n        return <WikidataTextLink url={wikidataUrl}>{children}</WikidataTextLink>\n    }\n    return <NoTextLink>{children}</NoTextLink>\n}\n\n\n\n/* TEXT LINK EXAMPLE (with all options present):\n{\n    \"start\": 271,\n    \"end\": 276,\n    \"mention\": null,\n    \"origin\": \"entity_fishing\",\n    \"annotation\": {\n        \"wikidata_entity_id\": \"Q14274\",\n        \"wikipedia_page_id\": 168146,\n        \"wikipedia_page_title\": null,\n        \"wikidata_entity_url\": \"http://www.wikidata.org/entity/Q14274\",\n        \"grobid_tag\": null,\n        \"extra_fields\": {\n            \"rawName\": \"protestants\",\n            \"confidence_score\": 0.6095,\n            \"domains\": [\n                \"Sociology\",\n                \"Computer_Science\"\n            ],\n            \"origin\": \"entity_fishing\"\n        }\n    },\n    \"href\": \"fr/articles/001620\",\n    \"dhsid\": \"001620\",\n    \"wiki\": {\n        \"item\": \"http://www.wikidata.org/entity/Q14274\",\n        \"itemLabel\": \"Aarau\",\n        \"dhsid\": \"001620\",\n        \"namefr\": \"Aarau\",\n        \"articlefr\": \"https://fr.wikipedia.org/wiki/Aarau\",\n        \"namede\": \"Aarau\",\n        \"articlede\": \"https://de.wikipedia.org/wiki/Aarau\",\n        \"nameit\": \"Aarau\",\n        \"articleit\": \"https://it.wikipedia.org/wiki/Aarau\",\n        \"nameen\": \"Aarau\",\n        \"articleen\": \"https://en.wikipedia.org/wiki/Aarau\",\n        \"instanceof\": \"http://www.wikidata.org/entity/Q14770218\",\n        \"instanceofLabel\": \"capitale cantonale de Suisse\",\n        \"gndid\": \"4000018-7\",\n        \"wikidata_id\": \"Q14274\"\n    }\n},\n\n*/","import React, { useState, useRef, useEffect, createRef, useCallback } from \"react\";\nimport {DhsArticleLink} from \"./TextLink\"\nimport {\n  useSearchParams,\n  useParams,\n  useNavigate,\n  createSearchParams\n} from \"react-router-dom\";\nimport {Form, Button} from \"react-bootstrap\"\n\n\nexport function ArticleSearch(){\n\n  const navigate = useNavigate()\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [searchTerm, setSearchTerm] = useState(searchParams.get(\"q\"));\n  const {language} = useParams();\n\n  // set searchTerm on form submit\n  const onSearchFormSubmit = (event)=>{\n    event.preventDefault()\n    event.stopPropagation()\n    setSearchTerm(document.getElementById('dhs-article-text-search').value)\n  }\n\n  // if search term changed -> go to search apge\n  useEffect(()=>{\n    if(searchTerm){\n      // go to articles list page in given language + set search ?q parameter\n      navigate({pathname: \"/\"+language, \"search\": \"?\"+createSearchParams({q: searchTerm})})\n    }\n  }, [searchTerm])\n\n  return (\n    <Form id=\"dhs-article-search\" onSubmit={onSearchFormSubmit}>\n      <Form.Control id='dhs-article-text-search' type=\"text\" defaultValue={searchTerm} name=\"q\"/>\n      <Button variant=\"primary\" type=\"submit\">\n        Search\n      </Button>\n    </Form>\n  );\n}\n\nexport default ArticleSearch;\n","import React from 'react'\nimport {Navbar, Nav, NavDropdown, Alert} from 'react-bootstrap'\nimport {LinkContainer} from 'react-router-bootstrap'\nimport {\n    Link,\n    useParams\n} from \"react-router-dom\";\n\nimport {ArticleSearch} from \"./ArticleSearch\"\n\nconst LanguageChooser = ({}) => {\n    const possibleLanguages = [\"de\", \"fr\", \"it\"]\n    const { language } = useParams();\n\n    const links = possibleLanguages.filter(l=>l!= language).map(l=>{\n            const urlToLng = (window.location+\"\").split(\"#\")[1].replace(language,l)\n            return  <LinkContainer key={l} to={urlToLng}>\n                        <NavDropdown.Item>{l.toUpperCase()}</NavDropdown.Item>\n                    </LinkContainer>\n        }\n    )\n    return <NavDropdown className=\"language-chooser\" title={language.toUpperCase()} id=\"basic-nav-dropdown\">\n            {links}\n            <Alert variant=\"info\">the chosen language only affects articles contents.</Alert>\n        </NavDropdown>\n}\n\nconst NavBarHeader = () => {\n    const { language, dhsId } = useParams();\n    //console.log(\"NavBarHeader, language: \", language, \", dhsId: \", dhsId, \"window.location.pathname=\",window.location.pathname)\n    return (\n        <Navbar id=\"ldhs-navbar\" expand=\"md\" className=\"justify-content-center\">\n            <Navbar.Toggle aria-controls=\"ldhs-collapsible-navbar\" />\n            <Navbar.Collapse id=\"ldhs-collapsible-navbar\">\n                <Nav className=\"justify-content-center\">\n                    <LinkContainer to={\"/\"+language+\"/articles\"}>\n                        <Nav.Link>Home</Nav.Link>\n                  </LinkContainer>\n                    <LinkContainer to={\"/\"+language+\"/themes\"}>\n                        <Nav.Link>Themes</Nav.Link>\n                  </LinkContainer>\n                    <LinkContainer to={\"/\"+language+\"/about\"}>\n                        <Nav.Link>About</Nav.Link>\n                  </LinkContainer>\n                  <LanguageChooser/>\n                </Nav>\n            </Navbar.Collapse>\n\n            <div id=\"search-wrapper\">\n                <ArticleSearch/>\n            </div>\n        </Navbar>\n    )\n}\n\nexport default NavBarHeader","import React from \"react\";\nimport {Container, Row, Col} from \"react-bootstrap\"\nimport NavBarHeader from \"./Navbar.js\"\n\nimport \"./style.scss\"\n\nexport function CenteredLayout({children}){\n\n    return (\n      <div className=\"main\">\n        <NavBarHeader/>\n        <Container className=\"centered-article-container\">\n          <Row className=\"justify-content-md-center\">\n            <Col lg=\"7\" className=\"justify-content-md-center centered-article-content\">\n                {children}\n            </Col>\n          </Row>\n        </Container>\n      </div>\n    );\n  }","import React from \"react\";\n\nexport const CopyrightFooter = ({children=[]})=> {\n    console.log(\"CopyrightFooter children: \", children)\n    return (\n        <div id=\"copyright-footer\">\n            The content of all HDS articles presented on this website are the work of their respective author from the original HDS. {children}\n            This work is available under the Creative Common Attribution-ShareAlike 4.0 International License (<a href=\"https://creativecommons.org/licenses/by-sa/4.0/\" target=\"_blank\">CC BY-SA 4.0</a>)\n        </div>\n    )\n}","import React, { useState, useRef, useEffect, createRef, useCallback } from \"react\";\nimport {\n  useParams, useNavigate, createSearchParams\n} from \"react-router-dom\";\nimport {Alert} from \"react-bootstrap\"\n\nimport {TextLink, WikidataTextLink, WikipediaTextLink, realDhsLink, RealDhsArticleLink, getWikipediaUrlFromPageId, dhsLinkClass, wikipediaLinkClass, originalDhsLinkClass} from \"./TextLink\"\nimport {CenteredLayout} from \"./Layout\"\nimport {CopyrightFooter} from \"./CopyrightFooter\"\n\n\n\nfunction TextWithLinks({text, textLinks=[], language=\"de\"}){\n    if(textLinks.length==0){\n        return text\n    }\n    //console.log(\"textLinks: \", textLinks)\n    textLinks.sort((a,b) => a.start-b.start)\n    let previousTextLink = {start:0, end: 0}\n    const textsAndLinks = textLinks.map((textLink,i) =>{\n        //console.log(\"textsAndLinks mapping\\npreviousTextLink:\", previousTextLink, \"\\ntextLink: \",textLink)\n        if(textLink.start>=previousTextLink.end){\n            const previousTextLinkEnd = previousTextLink.end\n            previousTextLink = textLink\n            //console.log(\"textsAndLinks mapping bis, textLink: \",textLink)\n            return [\n                text.substring(previousTextLinkEnd, textLink.start),\n                <TextLink textlink={textLink} language={language} key={i}>{text.substring(textLink.start, textLink.end)}</TextLink>\n            ]\n        }else{\n            console.warn(\"Overlapping text links\\npreviousTextLink:\", previousTextLink, \"\\ntextLink: \",textLink)\n        }\n        return false\n    }).filter(x=>x).flat()\n    textsAndLinks.push(text.substring(previousTextLink.end, text.length))\n    return textsAndLinks\n}\n\nfunction TextBlock({tag=\"p\", textLinks = [], children=\"\", language=\"de\"}){\n    const text = children[0]\n    console.log(\"TextBlock children: \", children)\n\n    //const textWithLinks = []\n    switch(tag) {\n        case \"h1\":\n            return <h1>{children}</h1>\n        case \"h2\":\n            return <h2>{children}</h2>\n        case \"h3\":\n            return <h3>{children}</h3>\n        case \"h4\":\n            return <h4>{children}</h4>\n        case \"p\":\n            return <p><TextWithLinks text={text} textLinks={textLinks} language={language}/></p>\n        default:\n            return <div><TextWithLinks text={text} textLinks={textLinks} language={language}/></div>\n      } \n}\n\nexport function DhsArticleContent({\n    article = {},\n    language=\"de\",\n    baseurl=\"\"\n}) {    \n    //\"wikidata_url\": \"http://www.wikidata.org/entity/Q121410\",\n    //\"wikipedia_page_title\": \"District d'Aarau\",\n    console.log(\"DhsArticleContent baseurl:\", baseurl)\n\n    // hack: use the search_result_name to have a nice title\n    if(article.text_blocks && article.text_blocks.length>0){\n        article.text_blocks[0][1] = article.search_result_name\n    }\n\n\n    // externalLinks to DHS, WK, WD for the first text block, the article title\n    const logoSize = \"20px\" \n    const wikipediaUrl = article.wikipedia_page_title? getWikipediaUrlFromPageId(language, article.wikipedia_page_title):false\n    const wikidataUrl = article.wikidata_url? article.wikidata_url:false\n    const wikipediaLink = wikipediaUrl? <WikipediaTextLink key=\"wk-tl\" url={wikipediaUrl}><img src={baseurl+\"/wikipedia.png\"} width={logoSize} height={logoSize} /></WikipediaTextLink>:\"\"\n    const wikidataLink = wikidataUrl? <WikidataTextLink key=\"wdt-l\" url={wikidataUrl}><img src={baseurl+\"/wikidata.svg\"} width={logoSize} height={logoSize} /></WikidataTextLink>: \"\"\n    const externalLinks = <span>\n        <RealDhsArticleLink key=\"r-dhs-tl\" dhsId={article.id} language={language}> <img src={baseurl+\"/hds.png\"} className=\"real-dhs-article-external-link\" width={logoSize} height={logoSize} /></RealDhsArticleLink>\n        {wikipediaLink}\n        {wikidataLink}\n    </span>\n    \n    const textBlocks = article.text_blocks? article.text_blocks.map((tb,i)=>{\n        const [tag, text] = tb\n        return <TextBlock tag={tag} key={i} textLinks={article.text_links[i]} language={language}>{[text,\" \", i==0? externalLinks: \"\"]}</TextBlock>\n    }) : \"Loading...\"\n\n\n    return (\n        <div className=\"dhs-article\">\n            {textBlocks}\n            <hr/>\n            <ThematicIndexation tags={article.tags}/>\n            <hr/>\n            <CopyrightFooter>\n                Original article available <RealDhsArticleLink dhsId={article.id}>here</RealDhsArticleLink>. \n                <span></span>\n            </CopyrightFooter>\n        </div>\n    );\n}\n//{}\n\nexport function ThematicIndexation({tags=[]}){\n    return (\n        <div className=\"article-thematic-indexation\">\n            <h4>Thematic indexation</h4>\n                {tags.map(t=>\n                    <div className=\"article-thematic-indexation-element\" key={t.url} ><a href={\"https://hls-dhs-dss.ch\"+t.url} target=\"_blank\">{t.tag}</a></div>\n                )}\n        </div>\n    )\n}\n/*\n\n        \n*/\n\nexport function DhsArticle({baseurl=\"\"}) {\n\n  const { language, dhsId } = useParams();\n\n  const articleJsonUrl = baseurl+\"/data/\"+language+\"/\"+dhsId+\".json\"\n\n  const [article, setArticle] = useState({id:true})\n\n  useEffect(()=>{\n    fetch(articleJsonUrl).then(x=>x.json()).then(newArticle=>{\n        //article.lastArticle = {id: article.lastArticle? article.lastArticle.id}\n        //newArticle.lastArticle = article\n        setArticle(newArticle)\n    }).catch(x=>{\n        console.warn(\"DhsArticle problem loading article: \", x)\n        setArticle({lastArticle: article})\n    })\n  }, [articleJsonUrl])\n\n  useEffect(() => {\n        document.title = (article && article.search_result_name)? article.search_result_name : \"The Linked HDS\"\n  }, [article]);\n \n\n  console.log(\"DhsArticle.js language\", language, \"dhsId:\", dhsId, \", article:\", article)\n  if(!article.id){\n      return <MissingDhsArticle lastArticle={article.lastArticle}/>\n  }\n\n  return (\n    <CenteredLayout>\n        <Alert className=\"dhs-article-info\" variant=\"info\">\n            <a className={dhsLinkClass}>Blue links</a> point to other HDS articles.<br/>\n            <a className={wikipediaLinkClass}>Green links</a> point to Wikipedia articles.<br/>\n            <a className={dhsLinkClass+\" \"+originalDhsLinkClass}>Underdashed blue links</a> are links coming from the original HDS.<br/>\n        </Alert>\n        <DhsArticleContent article={article} language={language} baseurl={baseurl}/>\n    </CenteredLayout>\n  );\n}\n\nexport function MissingDhsArticle({lastArticle={}}) {\n  const { language, dhsId } = useParams();\n  //console.log(\"MissingDhsArticle.js language\", language, \"dhsId:\", dhsId, \"lastArticle.id: \", lastArticle.id)\n\n  const navigate = useNavigate()\n  const doSearch = useCallback(event=>{\n    event.preventDefault()\n    event.stopPropagation()\n    if(language && dhsId){\n        navigate({\"pathname\": \"/\"+language, \"search\": \"?\"+createSearchParams({\"q\": dhsId})})\n    }\n  }, [language, dhsId])\n\n  return (\n    <CenteredLayout>\n        <h1>Error 404: Article not found</h1>\n        <p>\n            Oops, it seems this article is missing. Are you sure the article id is correct?<br/>\n        </p>\n        <p>\n            <a href=\"#\" onClick={()=>window.history.back()}>Go back {lastArticle.title? \"(\"+lastArticle.title+\")\":\"\"}</a>\n        </p>\n        {dhsId?\n        <>\n            <p>\n                <a href=\"#\" onClick={doSearch}>Search for \"{dhsId}\"</a>\n            </p>\n            <p>\n                <RealDhsArticleLink dhsId={dhsId} language={language}>Visit the original HDS article</RealDhsArticleLink>\n            </p>\n        </>: \"\"}\n        \n    </CenteredLayout>\n  );\n}\n\nexport default DhsArticle;\n","import React, { useState, useRef, useEffect, createRef, useCallback } from \"react\";\nimport {DhsArticleLink} from \"./TextLink\"\nimport {\n  useParams,\n  useSearchParams\n} from \"react-router-dom\";\nimport {Alert} from \"react-bootstrap\"\n\n\nimport {CenteredLayout} from \"./Layout\"\n\n\nconst NB_MAX_DISPLAYED_ARTICLES = 100\n\nexport function ArticlesListItem({articleTitle, dhsId}){\n  return <div className=\"dhs-articles-list-item\">\n    <DhsArticleLink dhsId={dhsId}>\n      <span className=\"dhs-articles-list-item-id\">{dhsId+\" \"}</span>\n      <span className=\"dhs-articles-list-item-title\">{articleTitle}</span>\n    </DhsArticleLink>\n  </div>\n}\n\nexport function searchInIndex(completeIndex, searchTerm){\n  const lowerCaseSearchTerm = searchTerm.toLowerCase()\n  return completeIndex.filter(aid => aid[1].toLowerCase().indexOf(lowerCaseSearchTerm)!=-1)\n}\n\n\nexport function ArticlesList({baseurl=\"\"}) {\n  const { language } = useParams();\n  \n  const indexJsonUrl = baseurl+\"/data/indices/\"+language+\".json\"\n\n  const [index, setIndex] = useState([])\n  const [completeIndex, setCompleteIndex] = useState([])\n\n  const [searchParams] = useSearchParams();\n  const query = searchParams.get(\"q\")\n  console.log(\"------ ArticlesList.js language\", language, \" cIndex.l\", completeIndex.length, \" index.l\", index.length, \" ?q=\", query, \" ------\")\n\n  useEffect(() => {\n    document.title = \"The Linked HDS\"\n  }, []);\n\n  // filter index based on URL get parameter ?q=XX\n  useEffect(()=>{\n    if(query){\n      console.log(\"ArticlesList filtering based on query:\", query)\n      setIndex(searchInIndex(completeIndex, query))\n    }else{\n      setIndex(completeIndex)  \n    }\n  }, [query, completeIndex])\n\n  // fetch index json\n  useEffect(()=>{\n    fetch(indexJsonUrl).then(x=>x.json()).then(loadedIndex=>{\n      setCompleteIndex(loadedIndex)\n    })\n  }, [indexJsonUrl])\n\n  //console.log(\"ArticlesList indexJsonUrl: \", indexJsonUrl, \" index:\", index)\n\n  return (\n    <CenteredLayout>\n      <Alert className=\"dhs-article-info\" variant=\"info\">\n          Using the search bar above you can search for articles.<br/>\n          Search is only performed on articles' titles (exact match).<br/>\n      </Alert>\n      {\n        completeIndex.length===0? \"Loading articles index...\" : (\n          index.length>0 ?\n            index.filter((a,i)=>i<NB_MAX_DISPLAYED_ARTICLES).map((item,i)=> <ArticlesListItem key={i} dhsId={item[0]} articleTitle={item[1]}/>) :\n            'No articles with title matching \"'+query+'\".'\n        )\n      }\n    </CenteredLayout>\n  );\n}\n\nexport default ArticlesList;\n\n// <Form.Label>Search</Form.Label>\n/*\n\n*/","import React, { useEffect } from \"react\";\n\nimport {CenteredLayout} from \"./Layout\"\nimport {CopyrightFooter} from \"./CopyrightFooter\"\n\nexport const AboutPage = ()=> {\n\n    useEffect(() => {\n        document.title = \"The Linked HDS - About\"\n    }, []);\n    return (\n        <CenteredLayout>\n\n            <div id=\"about-content\">\n                <h1>About this project</h1>\n                <p>\n                    This website is a demonstration interface for a linked Historical Dictionary of Switzerland (HDS). It was made in the context of my PhD in Digital Humanities at EPFL where I will focus on extracting structured data from the HDS and making it available in interactive interfaces. If you're interested, drop me an email, contact information <a href=\"https://people.epfl.ch/didier.dupertuis\">here</a>.\n                    </p>\n                <p>                    \n                <a href=\"https://github.com/dddpt-epfl-phd/dhs-nerd/\">The code for the project and website is available here.</a>. <a href=\"https://github.com/dddpt-epfl-phd/dhs-nerd/raw/master/reports/HDS%20Named%20Entity%20Linking%20Report.pdf\">The full report for the project is available here</a>. Here is the abstract:\n                </p>\n                <p id=\"report-abstract\">\n                    In this work, our aim is to create a cross-linked version of the <a href=\"https://hls-dhs-dss.ch\" rel=\"nofollow\">the Historical Dictionary of Switzerland (HDS)</a>, a trilingual online encyclopedia on the history of Switzerland in French, German and Italian.\n                    We carried out and evaluated named entity recognition and linking on the 36’000 articles of the HDS.\n                    For named entity recognition and linking we used the entity-fishing tool.\n                    Based on the results, we created a demonstration web interface for a cross-linked HDS in the three languages.\n                    The cross-linked HDS has an average of 6 HDS links per 1000 characters against 1 HDS link in the current version of the HDS.\n                    However, around 60% of entities present in the HDS cannot be linked with our approach as those entities are absent from entity-fishing’s training set, Wikipedia.\n                    The cross-linked HDS demonstration interface is available here: <a href=\"https://dddpt-epfl-phd.github.io/dhs-nerd/\">https://dddpt-epfl-phd.github.io/dhs-nerd/</a>. It allows for a more enticing exploration experience of the HDS.\n                </p>\n                <h4>Copyright notice</h4>\n                <p>\n                    <CopyrightFooter/>\n                </p>\n            </div>\n        </CenteredLayout>\n    )\n}","import './HdsThematicIndexation.css';\nimport { useEffect } from \"react\";\n//import {d3} from \"d3\";\nimport * as d3 from \"d3\";\n\nconst categories = [\n  {name:\"themes\", color: \"#76b7b2\", active:true},\n    {name:\"people\", color: \"#59a14f\", active:true},\n    {name:\"families\", color: \"#f28e2c\", active:true},\n    {name:\"spatial\", color: \"#af7aa1\", active:true},\n]\n\nfunction HdsThematicIndexation({\n  treeDataJsonUrl = \"./tag_tree_with_ids_all.json\", // \"./tag_tree_with_ids_spatial.json\" // \n  baseurl = \"\"\n}) {\n\n  useEffect(()=>{\n\n\n\n    // toggle show/hide children of the node\n    function toggleChildrenVisible(d){\n      setChildrenVisible(d, !d.childrenVisible)\n    }\n    function setChildrenVisible(d, value){\n      d.childrenVisible = value\n    }\n\n    // toggle show/hide category statistics\n    function computeCategoriesVisibleStatistics(d){\n      d.visibleStatistics={}\n      d.visibleTotalStatistics={}\n      categories.forEach(c=>{\n        d.visibleStatistics[c.name] = c.active? d.statistics[c.name] : 0\n        d.visibleTotalStatistics[c.name] = c.active? d.total_statistics[c.name] : 0\n      })\n    }\n\n    function computeNbVisibleArticles(d){\n      return categories.map(c => d.visibleTotalStatistics[c.name]).reduce((a,b)=>a+b,0)\n    }\n\n    /** recursiveFunctionCall: applies recursiveFunc on d's children.\n     * \n     * recursiveFunc should take two arguments:\n     * - a node n\n     * - childrenResults: an array, containing the return result of recursiveFunc on n's children (0-length array for leaves)\n     */\n    function recursiveFunctionCall(d, recursiveFunc){\n      let childrenResult = []\n      if(d.children && d.children.length>0){\n        childrenResult = d.children.map(c=>recursiveFunctionCall(c, recursiveFunc))\n      }\n      return recursiveFunc(d, childrenResult)\n    }\n\n    // ************** Generate the tree diagram\t *****************\n    const margin = {top: 20, right: 120, bottom: 20, left: 120},\n      width = 960 - margin.right - margin.left,\n      height = 1000 - margin.top - margin.bottom;\n\n\n\n    let i = 0,\n      duration = 750,\n      root;\n\n    const tree = d3.tree()\n      .size([height, width]);\n\n    //var diagonal = d3.svg.diagonal().projection(function(d) { return [d.y, d.x]; });\n    function diagonal(d) {\n      const parent = d.parent? d.parent : d\n      return \"M\" + d.y + \",\" + d.x\n        + \"C\" + (d.y + parent.y) / 2 + \",\" + d.x\n        + \" \" + (d.y + parent.y) / 2 + \",\" + parent.x\n        + \" \" + parent.y + \",\" + parent.x;\n    }\n\n    var svg = d3.select(\"#hds-thematic-tree\")\n      .attr(\"width\", width + margin.right + margin.left)\n      .attr(\"height\", height + margin.top + margin.bottom)\n      .append(\"g\")\n      .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n\n    const nodeColorChildrenVisible = \"#ffffff\"\n    const nodeColorChildrenHidden = \"lightsteelblue\"\n    const nodeColorLeaf = \"#4682b4\"\n\n    let currentArticlesList = null\n    function setArticlesList(d){\n      if(currentArticlesList!=d.data.name){\n        console.log(\"setArticlesList for d=\",d)\n        const articlesList = document.getElementById(\"articles-list\")\n        let newHTML ='<h3 class=\"hds-thematic-title\">Articles for \"'+d.data.name+'\"</h3>'+\n          '<div class=\"hds-thematic-metadata\">'+\n            '<span>facet: '+d.data.facet+'</span><br/>'+\n            (d.data.full_name?'<span>full name: '+d.data.full_name+'</span>':'')+\n          '</div>'\n        d.data.articles.forEach(a=>{ \n          newHTML+='<div class=\"dhs-article\">' +\n            '<a class=\"dhs-dhs-link \" href=\"https://dddpt-epfl-phd.github.io/dhs-nerd/#/fr/articles/'+a[1]+'\" target=\"_blank\">'+a[0]+' ('+a[1]+')</a>' +\n            '<a class=\"dhs-real-dhs-link\" href=\"https://hls-dhs-dss.ch/fr/articles/'+a[1]+'\" target=\"_blank\"> <img src=\"'+baseurl+'/hds.png\" width=\"15px\" height=\"15px\"></a>' +\n            '</div>'\n        })\n        articlesList.innerHTML = newHTML\n        currentArticlesList = d.data.name\n      }\n    }\n    function getTotalStatisticAbsolute(category,d, normalize=360){\n      return d.data.visibleTotalStatistics[category]/normalize // absolute value\n    }\n    function getTotalStatisticProportion(category,d){\n      //return d.data.visibleTotalStatistics[category]/360 // absolute value\n      let total = categories.map(c=>d.data.visibleTotalStatistics[c.name]).reduce((a,b)=>a+b,0)\n      return d.data.visibleTotalStatistics[category]/total*100\n    }\n    function getTotalStatisticAsProportionFromParent(category,d){\n      //return d.data.visibleTotalStatistics[category]/360 // absolute value\n      const par = d.parent? d.parent : d\n      let total = categories.map(c=>par.data.visibleTotalStatistics[c.name]).reduce((a,b)=>a+b,0)\n      return d.data.visibleTotalStatistics[category]/total*100\n    }\n    function getStackedBarChartOffset(category,d, valueFunc){\n      let accu = 0\n      for(let c of categories){\n        if(c.name==category){\n          return accu\n        }\n        accu += valueFunc(c.name,d)\n      }\n    }\n\n    function update(source) {\n      const getSource = (d) => source? source : d.parent\n      // Compute the new tree layout.\n      let nodes = d3.hierarchy(root, d=> d.childrenVisible? d.children.filter(d=>computeNbVisibleArticles(d)>0) : null)\n      nodes = tree(nodes);\n\n        // Normalize for fixed-depth.\n      nodes.each(function(d) { d.y = d.depth * 180; });\n\n        // Update the nodes…\n      var node = svg.selectAll(\"g.node\")\n        .data(nodes.descendants(), function(d) { return d.data.id || (d.data.id = ++i)});\n\n      function nodeClass(d, extraClasses=\"\"){\n        return extraClasses +\" \"+ (!(d.data.children && d.data.children.length>0)? \"node-leaf\" : (\n          d.data.childrenVisible? \"node-children-visible\" : \"node-children-hidden\"\n        ))\n      }\n\n      // Enter any new nodes at the parent's previous position.\n      var nodeEnter = node.enter().append(\"g\")\n        .attr(\"class\", d => nodeClass(d, \"node\"))\n        .attr(\"transform\", d =>  \"translate(\" + getSource(d).data.y0 + \",\" + getSource(d).data.x0 + \")\")\n        .on(\"click\", nodeClick);\n\n\n\n        nodeEnter.append(\"circle\")\n        .attr(\"r\", 1)\n\n      nodeEnter.append(\"text\")\n        .attr(\"x\", d => d.data.children && d.data.children.length>0? -13 : 13)\n        .attr(\"dy\", \".35em\")\n        .attr(\"text-anchor\", d => d.data.children && d.data.children.length>0? \"end\" : \"start\")\n        .text(function(d) { return d.data.name; })\n        .style(\"fill-opacity\", 1)\n\n      const gStackedBarChartEnter = nodeEnter.append(\"g\")\n        .classed(\"node-stacked-bar-chart\",true)\n        .attr(\"transform\", d => \"translate(\"+ (d.data.children && d.data.children.length>0? -113 : 13)+\", 5)\")\n\n\n      const valueFunc=getTotalStatisticAsProportionFromParent//(a,b) => getTotalStatisticAbsolute(a,b,60)\n      \n      for(let c of categories){\n        gStackedBarChartEnter.append(\"rect\")\n          .attr(\"class\", \"stacked-bar-\"+c.name)\n          .attr(\"x\",d=>getStackedBarChartOffset(c.name,d, valueFunc))\n          .attr(\"width\", d=>{\n            //d.data.name==\"root\"? console.log(\"gStackedBarChartEnter for \", d.data.name, \", own: \", d.data.statistics, \", total:\",d.data.total_statistics,\", childrenStat: \", d.data.children_statistics, \" d.data.children:\", d.data.children,\"getStackedBarChartOffset(category,d)=\",getStackedBarChartOffset(category,d), \"getStackedBarChartValue(category,d)=\",getStackedBarChartValue(category,d)) :\"\"\n            return c.active? valueFunc(c.name,d) : 0\n          })\n          .attr(\"height\", 6)\n          .style(\"fill\", c.color)\n      }\n      \n      nodeEnter.transition()\n        .duration(duration)\n        .attr(\"transform\", d => \"translate(\" + d.y + \",\" + d.x + \")\");\n      \n      nodeEnter.select(\"circle\").transition()\n        .duration(duration)\n        .attr(\"r\", 10)\n\n      // Transition nodes to their new position.\n      var nodeUpdate = node.transition()\n        .attr(\"class\", d => nodeClass(d, \"node\"))\n        .duration(duration)\n        .attr(\"transform\", d => \"translate(\" + d.y + \",\" + d.x + \")\");\n        \n        nodeUpdate.select(\"circle\")\n        .attr(\"r\", 10)\n\n        nodeUpdate.select(\"text\")\n        .style(\"fill-opacity\", 1);\n\n      const gStackedBarChartUpdate = nodeUpdate.select(\".node-stacked-bar-chart\")\n      for(let c of categories){\n        gStackedBarChartUpdate.select(\".stacked-bar-\"+c.name)\n          .attr(\"x\",d=>getStackedBarChartOffset(c.name,d, valueFunc))\n          .attr(\"width\", d=>{\n            //d.data.name==\"root\"? console.log(\"gStackedBarChart for \", d.data.name, \", own: \", d.data.statistics, \", total:\",d.data.total_statistics,\", childrenStat: \", d.data.children_statistics, \" d.data.children:\", d.data.children,\"getStackedBarChartOffset(category,d)=\",getStackedBarChartOffset(category,d), \"getStackedBarChartValue(category,d)=\",getStackedBarChartValue(category,d)) :\"\"\n            return c.active? valueFunc(c.name,d) : 0\n          })\n      }\n\n      // Transition exiting nodes to the parent's new position.\n      var nodeExit = node.exit().transition()\n        .duration(duration)\n        .attr(\"transform\", d => \"translate(\" + getSource(d).y + \",\" + getSource(d).x + \")\")\n        .remove();\n\n        nodeExit.select(\"circle\")\n        .attr(\"r\", 1e-6);\n\n        nodeExit.select(\"text\")\n        .style(\"fill-opacity\", 1e-6);\n\n      // Update the links…\n      var link = svg.selectAll(\"path.link\")\n        .data(nodes.descendants().slice(1), d => d.data.id+\"--\"+d.parent.data.id);\n\n      // Enter any new links at the parent's previous position.\n      link.enter().insert(\"path\", \"g\")\n        .attr(\"class\", \"link\")\n        .attr(\"d\", d => diagonal({x: getSource(d).data.x0, y: getSource(d).data.y0}))\n        .transition()\n        .duration(duration)\n        .attr(\"d\", diagonal);\n\n      // Transition links to their new position.\n      link.transition()\n        .duration(duration)\n        .attr(\"d\", diagonal);\n\n      // Transition exiting nodes to the parent's new position.\n      link.exit().transition()\n        .duration(duration)\n        .attr(\"d\", d => diagonal({x: getSource(d).x, y: getSource(d).y}))\n        .remove();\n\n      // Stash the old positions for transition.\n      nodes.each(function(d) {\n        d.data.x0 = d.x;\n        d.data.y0 = d.y;\n      });\n    }\n\n    // Toggle children on click.\n    function nodeClick(target, d) {\n      console.log(\"statistics for \", d.data.name, \", own: \", d.data.statistics, \", total:\",d.data.total_statistics,\", childrenStat: \", d.data.children_statistics, \" d.data.children:\", d.data.children, \"d.data.articles\", d.data.articles, \"d\", d)\n      toggleChildrenVisible(d.data)\n      update(d);\n      setArticlesList(d)\n    }\n\n    fetch(treeDataJsonUrl).then(resp=> resp.json()).then(treeData=>{\n      console.log(\"fetchyfetch\", treeData)\n      root = treeData\n      const startingSource = {\n        data:{\n          x0: height / 2,\n          y0: 0\n        }\n      }\n\n      // showing categories color legend\n      const categoriesLegend = d3.select(\"#hds-thematic-tree-legend\")\n      categories.forEach( (c, i) =>{\n        \n        const categoryDiv = categoriesLegend.append(\"div\")\n          .attr(\"class\",\"categories-legend categories-legend-\"+c.name+\" \"+ (c.active?\"\":\"inactive\"))\n        const categoryCheckbox = categoryDiv.append(\"input\")\n          .attr(\"type\", \"checkbox\")\n          .attr(\"id\", \"checkbox-\"+c.name)\n          .attr(\"value\", c.name)\n        if(c.active){\n          categoryCheckbox.attr(\"checked\", c.active)\n        }\n        const categoryLabel = categoryDiv.append(\"label\")\n          .attr(\"for\", \"checkbox-\"+c.name)\n        categoryLabel.append(\"span\")\n          .attr(\"class\",\"categories-legend-square\")\n          .style(\"border-color\",c.color)\n        categoryLabel.append(\"span\").text(c.name)\n\n        categoryCheckbox.on(\"change\", e=>{\n          c.active = e.target.checked\n          categoryDiv.classed(\"inactive\",!c.active)\n          recursiveFunctionCall(root, computeCategoriesVisibleStatistics)\n          update()\n        })\n      })\n\n\n      //recursiveFunctionCall(root, computeNodeStatistics)\n      recursiveFunctionCall(root, computeCategoriesVisibleStatistics)\n      setChildrenVisible(root, true)\n      root.children.forEach(c=> recursiveFunctionCall(c, c=>setChildrenVisible(c,false)))\n      recursiveFunctionCall(root, n=>{\n        n.children=n.children.filter(c=>c.total_statistics.spatial+c.total_statistics.themes+c.total_statistics.people+c.total_statistics.families>0)\n      })\n      update(startingSource);\n\n      //d3.select(self.frameElement).style(\"height\", \"500px\");\n    })\n  }, [])\n  return (\n    <div id=\"container\">\n      <svg id=\"hds-thematic-tree\">\n      </svg>  \n      <div id=\"hds-thematic-tree-legend\">\n      </div>\n      <div id=\"articles-list\">\n      </div>\n\t  </div>\n  );\n}\n\nexport default HdsThematicIndexation;\n","import React from \"react\";\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport {\n  HashRouter as Router,\n  Routes,\n  Route,\n  Navigate,\n  //Link\n  useLocation\n} from \"react-router-dom\";\n\nimport {DhsArticle} from \"./DhsArticle\"\nimport {ArticlesList} from \"./ArticlesList\"\nimport {AboutPage} from \"./About\"\nimport HdsThematicIndexation from './HdsThematicIndexation';\nimport NavBarHeader from \"./Navbar.js\"\n\nconst Route404 = ({tadu=\"DEFAULT\"})=><div>THIS IS A {tadu} ROUTE</div>\nexport default function Routing() {\n\n  const HdsThematicIndexationURL = process.env.PUBLIC_URL+\"/data/indices/tag_tree_with_ids_all.json\"\n  return (\n    <>\n    <Router>\n      <Routes basename={process.env.PUBLIC_URL}>\n          <Route path=\"/:language/articles/:dhsId\" element={<DhsArticle baseurl={process.env.PUBLIC_URL}/>}/>\n          <Route path=\"/:language\" element={<ArticlesList  baseurl={process.env.PUBLIC_URL}/>}/>\n          <Route path=\"/:language/articles\" element={<ArticlesList  baseurl={process.env.PUBLIC_URL}/>}/>\n          <Route path=\"/:language/themes\" element={<>\n            <NavBarHeader/>\n            <HdsThematicIndexation  treeDataJsonUrl={HdsThematicIndexationURL} baseurl={process.env.PUBLIC_URL}/>\n          </>}/>\n          <Route path=\"/:language/about\" element={<AboutPage/>}/>\n          <Route exact path=\"/\" element={<Navigate to=\"/fr\" />} />\n          <Route path='*' element={<Route404/>} />\n      </Routes>\n    </Router>\n    </>\n  );\n}\n//\n        ","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n//import App from \"./components/App\";\nimport Routing from \"./Routing\";\n\nReactDOM.render(\n      <Routing />,\n    document.getElementById(\"root\")\n);\n\n"],"sourceRoot":""}