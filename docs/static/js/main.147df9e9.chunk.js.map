{"version":3,"sources":["TextLink.js","Navbar.js","Layout.js","CopyrightFooter.js","DhsArticle.js","ArticlesList.js","Routing.js","index.js"],"names":["getLinkSubProperty","textLink","property","subproperty","undefined","getLinkAnnotationProperty","getLinkDhsId","dhsId","dhsid","href","dhsUrl","match","decomposeDhsUrl","getWikipediaUrlFromPageId","language","pageId","replace","dhsLinkClass","originalDhsLinkClass","wikipediaLinkClass","NoTextLink","className","children","noLinkClass","DhsArticleLink","originalLink","getDhsUrlFromDhsId","useParams","to","RealDhsArticleLink","url","getRealDhsUrlFromDhsId","target","WikipediaTextLink","WikidataTextLink","TextLink","textlink","origin","wikipediaUrl","getLinkWikipediaUrl","wikidataUrl","getLinkWikidataUrl","LanguageChooser","links","filter","l","map","urlToLng","window","location","NavDropdown","Item","toUpperCase","title","id","NavBarHeader","Navbar","bg","expand","Toggle","Collapse","Nav","Link","CenteredLayout","Container","Row","Col","lg","CopyrightFooter","console","log","TextWithLinks","text","textLinks","length","sort","a","b","start","previousTextLink","end","textsAndLinks","i","previousTextLinkEnd","substring","warn","x","flat","push","TextBlock","tag","DhsArticleContent","article","baseurl","text_blocks","search_result_name","logoSize","wikipedia_page_title","wikidata_url","wikipediaLink","src","width","height","wikidataLink","externalLinks","textBlocks","tb","text_links","DhsArticle","articleJsonUrl","useState","setArticle","useEffect","fetch","then","json","newArticle","catch","lastArticle","Alert","variant","MissingDhsArticle","onClick","history","back","ArticlesListItem","articleTitle","ArticlesList","indexJsonUrl","index","setIndex","completeIndex","setCompleteIndex","Form","onSubmit","event","searchTerm","document","getElementById","value","lowerCaseSearchTerm","toLowerCase","aid","indexOf","searchInIndex","preventDefault","stopPropagation","Group","controlId","Control","type","placeholder","Button","item","Route404","tadu","Routing","basename","process","path","element","exact","ReactDOM","render"],"mappings":"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","file":"static/js/main.147df9e9.chunk.js","sourcesContent":["import {\n    Link,\n    useParams\n  } from \"react-router-dom\";\n\n\n\n/*\n * Different text links:\n * - dhs-article\n * - wikipedia\n * - wikidata\n * \n * needs:\n * - triage between the 3 different types\n * - choose to force a priority order\n * - \n * \n * triage:\n * - dhsArticle: has .dhsid property\n * - wikidata: has .wiki.item not null property\n * - wikipedia: has .wiki.articleLNG not null property\n * - unidentified identity: none of the above\n * \n * \n * \n * \n */\n\nfunction getLinkSubProperty(textLink, property, subproperty){\n    if( textLink[property] &&\n        textLink[property][subproperty] &&\n        textLink[property][subproperty]!=\"\" &&\n        textLink[property][subproperty]!==undefined &&\n        textLink[property][subproperty]!==null\n    ){\n        return textLink[property][subproperty]        \n    }\n    return false\n\n}\n\nfunction getLinkWikiProperty(textLink, property){\n    return getLinkSubProperty(textLink,\"wiki\", property)\n}\n\nfunction getLinkAnnotationProperty(textLink, property){\n    return getLinkSubProperty(textLink,\"annotation\", property)\n}\n\n\nfunction getLinkAnnotationExtraField(textLink, extraField){\n    const extraFields = getLinkAnnotationProperty(textLink, \"extra_fields\")\n    return extraFields? extraFields[extraField] : false\n}\n\nexport function getDhsUrlFromDhsId(dhsId, language=\"de\"){\n    return (language? \"/\"+language : \"\")+\"/articles/\"+dhsId\n}\nexport function getRealDhsUrlFromDhsId(dhsId, language=\"de\"){\n    return \"https://hls-dhs-dss.ch\"+ (language? \"/\"+language : \"\")+\"/articles/\"+dhsId\n}\nexport function decomposeDhsUrl(dhsUrl){\n    const urlRegex = /\\/(\\w+)?\\/?articles\\/(.+?)\\/(\\d{4}-\\d{2}-\\d{2})?/\n    return dhsUrl.match(urlRegex) // 0: whole path, 1: language, 2: dhs id, 3: version\n}\nexport function getDhsIdFromDhsUrl(dhsUrl){\n    return decomposeDhsUrl(dhsUrl)[2]\n}\n\n/** dhsArticle: has .dhsid property\n * \n * @param {*} textLink \n * @returns {str or null}: this textLink dhs-id or false if no dhs id in this link (doesn't link to a dhs article)\n */\n export function getLinkDhsId(textLink){\n    let dhsId = textLink.dhsid && textLink.dhsid!=\"\" && textLink.dhsid!==undefined && textLink.dhsid!==null? textLink.dhsid : false\n    // if the dhsId field is missing, the dhsId is sometimes in the href field only\n    if(!dhsId){\n        dhsId = textLink.href && textLink.href!=\"\" && textLink.href!==undefined && textLink.href!==null? getDhsIdFromDhsUrl(textLink.href) : false    \n    }\n    return dhsId\n}\n/** dhsArticle: has .dhsid property\n * \n * @param {*} textLink \n * @returns {str or null}: this textLink dhs-id or false if no dhs id in this link (doesn't link to a dhs article)\n */\nexport function getLinkDhsUrl(textLink, language=false){\n    const dhsId = getLinkDhsId(textLink)\n    return dhsId? (language? \"/\"+language : \"\")+\"/articles/\"+dhsId : false\n}\n\nconst wikipediaBaseUrl = \"https://<LNG>.wikipedia.org/wiki/\"\nconst wikipediaBaseUrlFromPageId = \"https://<LNG>.wikipedia.org/?curid=\"\nexport const getWikipediaUrlFromPageId = (language, pageId) => wikipediaBaseUrlFromPageId.replace(\"<LNG>\",language)+pageId\n/**  wikipedia: has .wiki.articleLNG not null property\n * \n * @param {*} textLink \n * @returns {str or null}: this textLink wikipediaUrl or false if no wikipediaUrl in this link\n */\nexport function getLinkWikipediaUrl(textLink, language){\n    const pageId = getLinkAnnotationProperty(textLink, \"wikipedia_page_id\")\n    return pageId? getWikipediaUrlFromPageId(language, pageId) : false\n}\n\n/**  wikidata: has .wiki.item not null property\n * \n * @param {*} textLink \n * @returns {str or null}: this textLink wikidataUrl or false if no wikidataUrl in this link\n */\nexport function getLinkWikidataUrl(textLink){\n    return getLinkAnnotationProperty(textLink, \"wikidata_entity_url\")\n}\n\n\nexport const noLinkClass = \"no-text-link\"\nexport const dhsLinkClass = \"dhs-dhs-link\"\nexport const originalDhsLinkClass = \"dhs-original-dhs-link\"\nexport const realDhsLinkClass = \"dhs-real-dhs-link\"\nexport const wikipediaLinkClass = \"dhs-wikipedia-link\"\nexport const wikidataLinkClass = \"dhs-wikidata-link\"\n\n\nexport function NoTextLink({className=\"\", children=[]}){\n    return <span className={noLinkClass+\" \"+className}>{children}</span>\n}\n\n\n\nexport function DhsArticleTextLink({dhsUrl = \"\", children=[]}){\n    return <Link className={dhsLinkClass} to={dhsUrl}>{children}</Link>\n}\n\nexport function DhsArticleLink({dhsId = \"\", children=[], originalLink=false}){\n    const { language } = useParams();\n    const dhsUrl = getDhsUrlFromDhsId(dhsId, language)\n    return <Link className={dhsLinkClass+\" \"+(originalLink? originalDhsLinkClass: \"\")} to={dhsUrl}>{children}</Link>\n}\nexport function RealDhsArticleLink({dhsId = \"\", language=\"de\", children=[]}){\n    const url = getRealDhsUrlFromDhsId(dhsId, language)\n    return <a className={realDhsLinkClass} href={url} target=\"_blank\">{children}</a>\n}\n\n\n\nexport function WikipediaTextLink({url = \"\", children=[]}){\n    return <a className={wikipediaLinkClass} href={url} target=\"_blank\">{children}</a>\n}\n\n\n\nexport function WikidataTextLink({url = \"\", children=[]}){\n    return <a className={wikidataLinkClass} href={url} target=\"_blank\">{children}</a>\n}\n\n\n\nexport function TextLink({\n    textlink = {},\n    language=\"de\",\n    children = []\n}){\n    const textLink = textlink\n    //console.log(\"<TextLink/> textLink:\", textLink, \"\\nlanguage: \", language, \"\\nchildren: \", children,\"\\nzulu: \",zulu)\n    const dhsId = getLinkDhsId(textLink)\n    if(dhsId){\n        return <DhsArticleLink dhsId={dhsId} originalLink={textLink.origin!==\"entity_fishing\"}>{children}</DhsArticleLink>\n    }\n    /*const dhsUrl = getLinkDhsUrl(textLink, language)\n    if(dhsUrl){\n        return <DhsArticleTextLink dhsUrl={dhsUrl}>{children}</DhsArticleTextLink>\n    }*/\n    const wikipediaUrl = getLinkWikipediaUrl(textLink, language)\n    //console.log(\"TextLink no DHS id wikipediaUrl=\",wikipediaUrl, \"textLink.annotation.wikipedia_page_title: \",textLink.annotation.wikipedia_page_title, \"textLink.annotation.wikipedia_page_id: \",textLink.annotation.wikipedia_page_id)\n    if(wikipediaUrl){\n        return <WikipediaTextLink url={wikipediaUrl}>{children}</WikipediaTextLink>\n    }\n    const wikidataUrl = getLinkWikidataUrl(textLink)\n    if(wikidataUrl){\n        return <WikidataTextLink url={wikidataUrl}>{children}</WikidataTextLink>\n    }\n    return <NoTextLink>{children}</NoTextLink>\n}\n\n\n\n/* TEXT LINK EXAMPLE (with all options present):\n{\n    \"start\": 271,\n    \"end\": 276,\n    \"mention\": null,\n    \"origin\": \"entity_fishing\",\n    \"annotation\": {\n        \"wikidata_entity_id\": \"Q14274\",\n        \"wikipedia_page_id\": 168146,\n        \"wikipedia_page_title\": null,\n        \"wikidata_entity_url\": \"http://www.wikidata.org/entity/Q14274\",\n        \"grobid_tag\": null,\n        \"extra_fields\": {\n            \"rawName\": \"protestants\",\n            \"confidence_score\": 0.6095,\n            \"domains\": [\n                \"Sociology\",\n                \"Computer_Science\"\n            ],\n            \"origin\": \"entity_fishing\"\n        }\n    },\n    \"href\": \"fr/articles/001620\",\n    \"dhsid\": \"001620\",\n    \"wiki\": {\n        \"item\": \"http://www.wikidata.org/entity/Q14274\",\n        \"itemLabel\": \"Aarau\",\n        \"dhsid\": \"001620\",\n        \"namefr\": \"Aarau\",\n        \"articlefr\": \"https://fr.wikipedia.org/wiki/Aarau\",\n        \"namede\": \"Aarau\",\n        \"articlede\": \"https://de.wikipedia.org/wiki/Aarau\",\n        \"nameit\": \"Aarau\",\n        \"articleit\": \"https://it.wikipedia.org/wiki/Aarau\",\n        \"nameen\": \"Aarau\",\n        \"articleen\": \"https://en.wikipedia.org/wiki/Aarau\",\n        \"instanceof\": \"http://www.wikidata.org/entity/Q14770218\",\n        \"instanceofLabel\": \"capitale cantonale de Suisse\",\n        \"gndid\": \"4000018-7\",\n        \"wikidata_id\": \"Q14274\"\n    }\n},\n\n*/","import React from 'react'\nimport {Navbar, Nav, NavDropdown} from 'react-bootstrap'\nimport {LinkContainer} from 'react-router-bootstrap'\nimport {\n    Link,\n    useParams\n} from \"react-router-dom\";\n\nconst LanguageChooser = ({}) => {\n    const possibleLanguages = [\"de\", \"fr\", \"it\"]\n    const { language } = useParams();\n\n    const links = possibleLanguages.filter(l=>l!= language).map(l=>{\n            const urlToLng = (window.location+\"\").replace(language,l)\n            return  <LinkContainer key={l} to={urlToLng}>\n                        <NavDropdown.Item>{l.toUpperCase()}</NavDropdown.Item>\n                    </LinkContainer>\n        }\n    )\n    return <NavDropdown className=\"language-chooser\" title={language.toUpperCase()} id=\"basic-nav-dropdown\">\n            {links}\n        </NavDropdown>\n}\n\nconst NavBarHeader = () => {\n    const { language, dhsId } = useParams();\n    //console.log(\"NavBarHeader, language: \", language, \", dhsId: \", dhsId, \"window.location.pathname=\",window.location.pathname)\n    return (\n        <Navbar bg=\"light\" expand=\"lg\">\n            <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n            <Navbar.Collapse id=\"basic-navbar-nav\">\n                <Nav className=\"mr-auto\">\n                    <LinkContainer to={\"/\"+language+\"/articles\"}>\n                        <Nav.Link>Articles</Nav.Link>\n                  </LinkContainer>\n                  <LanguageChooser/>\n                </Nav>\n            </Navbar.Collapse>\n        </Navbar>\n    )\n}\n\nexport default NavBarHeader","import React from \"react\";\nimport {Container, Row, Col} from \"react-bootstrap\"\nimport NavBarHeader from \"./Navbar.js\"\n\nimport \"./style.scss\"\n\nexport function CenteredLayout({children}){\n\n    return (\n      <div className=\"main\">\n        <NavBarHeader/>\n        <Container className=\"centered-article-container\">\n          <Row className=\"justify-content-md-center\">\n            <Col lg=\"7\" className=\"justify-content-md-center centered-article-content\">\n                {children}\n            </Col>\n          </Row>\n        </Container>\n      </div>\n    );\n  }","import React from \"react\";\n\nexport const CopyrightFooter = (children=[])=> {\n    console.log(\"CopyrightFooter children: \", children)\n    return (\n        <div id=\"copyright-footer\">\n            The content of all HDS articles presented on this website are the work of their respective author from the original HDS. {children} <br/>\n            This work is available under the <a href=\"https://creativecommons.org/licenses/by-sa/4.0/\" target=\"_blank\">Creative Common Attribution-ShareAlike 4.0 International License (CC BY-SA 4.0) </a>\n        </div>\n    )\n}","import React, { useState, useRef, useEffect, createRef, useCallback } from \"react\";\nimport {\n  useParams\n} from \"react-router-dom\";\nimport {Alert} from \"react-bootstrap\"\n\nimport {TextLink, WikidataTextLink, WikipediaTextLink, realDhsLink, RealDhsArticleLink, getWikipediaUrlFromPageId, dhsLinkClass, wikipediaLinkClass, originalDhsLinkClass} from \"./TextLink\"\nimport {CenteredLayout} from \"./Layout\"\nimport {CopyrightFooter} from \"./CopyrightFooter\"\n\n\n\nfunction TextWithLinks({text, textLinks=[], language=\"de\"}){\n    if(textLinks.length==0){\n        return text\n    }\n    //console.log(\"textLinks: \", textLinks)\n    textLinks.sort((a,b) => a.start-b.start)\n    let previousTextLink = {start:0, end: 0}\n    const textsAndLinks = textLinks.map((textLink,i) =>{\n        //console.log(\"textsAndLinks mapping\\npreviousTextLink:\", previousTextLink, \"\\ntextLink: \",textLink)\n        if(textLink.start>=previousTextLink.end){\n            const previousTextLinkEnd = previousTextLink.end\n            previousTextLink = textLink\n            //console.log(\"textsAndLinks mapping bis, textLink: \",textLink)\n            return [\n                text.substring(previousTextLinkEnd, textLink.start),\n                <TextLink textlink={textLink} language={language} key={i}>{text.substring(textLink.start, textLink.end)}</TextLink>\n            ]\n        }else{\n            console.warn(\"Overlapping text links\\npreviousTextLink:\", previousTextLink, \"\\ntextLink: \",textLink)\n        }\n        return false\n    }).filter(x=>x).flat()\n    textsAndLinks.push(text.substring(previousTextLink.end, text.length))\n    return textsAndLinks\n}\n\nfunction TextBlock({tag=\"p\", textLinks = [], children=\"\", language=\"de\"}){\n    const text = children[0]\n\n    //const textWithLinks = []\n    switch(tag) {\n        case \"h1\":\n            return <h1>{children}</h1>\n        case \"h2\":\n            return <h2>{children}</h2>\n        case \"h3\":\n            return <h3>{children}</h3>\n        case \"h4\":\n            return <h4>{children}</h4>\n        case \"p\":\n            return <p><TextWithLinks text={text} textLinks={textLinks} language={language}/></p>\n        default:\n            return <div><TextWithLinks text={text} textLinks={textLinks} language={language}/></div>\n      } \n}\n\nexport function DhsArticleContent({\n    article = {},\n    language=\"de\",\n    baseurl=\"\"\n}) {    \n    //\"wikidata_url\": \"http://www.wikidata.org/entity/Q121410\",\n    //\"wikipedia_page_title\": \"District d'Aarau\",\n    console.log(\"DhsArticleContent baseurl:\", baseurl)\n\n    // hack: use the search_result_name to have a nice title\n    if(article.text_blocks && article.text_blocks.length>0){\n        article.text_blocks[0][1] = article.search_result_name\n    }\n\n\n    // externalLinks to DHS, WK, WD for the first text block, the article title\n    const logoSize = \"20px\" \n    const wikipediaUrl = article.wikipedia_page_title? getWikipediaUrlFromPageId(language, article.wikipedia_page_title):false\n    const wikidataUrl = article.wikidata_url? article.wikidata_url:false\n    const wikipediaLink = wikipediaUrl? <WikipediaTextLink key=\"wk-tl\" url={wikipediaUrl}><img src={baseurl+\"/wikipedia.png\"} width={logoSize} height={logoSize} /></WikipediaTextLink>:\"\"\n    const wikidataLink = wikidataUrl? <WikidataTextLink key=\"wdt-l\" url={wikidataUrl}><img src={baseurl+\"/wikidata.svg\"} width={logoSize} height={logoSize} /></WikidataTextLink>: \"\"\n    const externalLinks = <span>\n        <RealDhsArticleLink key=\"r-dhs-tl\" dhsId={article.id} language={language}> <img src={baseurl+\"/hds.png\"} className=\"real-dhs-article-external-link\" width={logoSize} height={logoSize} /></RealDhsArticleLink>\n        {wikipediaLink}\n        {wikidataLink}\n    </span>\n    \n    const textBlocks = article.text_blocks? article.text_blocks.map((tb,i)=>{\n        const [tag, text] = tb\n        return <TextBlock tag={tag} key={i} textLinks={article.text_links[i]} language={language}>{[text,\" \", i==0? externalLinks: \"\"]}</TextBlock>\n    }) : \"Loading...\"\n\n\n    return (\n        <div className=\"dhs-article\">\n            {textBlocks}\n            <CopyrightFooter>\n                <RealDhsArticleLink dhsId={article.id}>Original article</RealDhsArticleLink>\n            </CopyrightFooter>\n        </div>\n    );\n}\n//{}\n\n\n\nexport function DhsArticle({baseurl=\"\"}) {\n\n  const { language, dhsId } = useParams();\n\n  const articleJsonUrl = baseurl+\"/data/\"+language+\"/\"+dhsId+\".json\"\n\n  const [article, setArticle] = useState({id:true})\n\n  useEffect(()=>{\n    fetch(articleJsonUrl).then(x=>x.json()).then(newArticle=>{\n        //article.lastArticle = {id: article.lastArticle? article.lastArticle.id}\n        //newArticle.lastArticle = article\n        setArticle(newArticle)\n    }).catch(x=>{\n        console.warn(\"DhsArticle problem loading article: \", x)\n        setArticle({lastArticle: article})\n    })\n  }, [articleJsonUrl])\n\n  console.log(\"DhsArticle.js language\", language, \"dhsId:\", dhsId, \", article:\", article)\n  if(!article.id){\n      return <MissingDhsArticle lastArticle={article.lastArticle}/>\n  }\n\n  return (\n    <CenteredLayout>\n        <Alert className=\"dhs-article-info\" variant=\"info\">\n            <a className={dhsLinkClass}>Blue links</a> point to other HDS articles.<br/>\n            <a className={wikipediaLinkClass}>Green links</a> point to Wikipedia articles.<br/>\n            <a className={dhsLinkClass+\" \"+originalDhsLinkClass}>Underdashed blue links</a> are links coming from the original HDS.<br/>\n        </Alert>\n        <DhsArticleContent article={article} language={language} baseurl={baseurl}/>\n    </CenteredLayout>\n  );\n}\n\nexport function MissingDhsArticle({lastArticle={}}) {\n  const { language, dhsId } = useParams();\n  //console.log(\"MissingDhsArticle.js language\", language, \"dhsId:\", dhsId, \"lastArticle.id: \", lastArticle.id)\n\n  return (\n    <CenteredLayout>\n        <h1>Error 404: Article not found</h1>\n        <p>\n            Oops, it seems this article is missing. Are you sure the article id is correct?<br/>\n        </p>\n        <p>\n            <a href=\"#\" onClick={()=>window.history.back()}>Go back {lastArticle.title? \"(\"+lastArticle.title+\")\":\"\"}</a>\n        </p>\n        {dhsId?\n        <p>\n            <RealDhsArticleLink dhsId={dhsId} language={language}>Visit the original HDS article</RealDhsArticleLink>\n        </p>: \"\"}\n        \n    </CenteredLayout>\n  );\n}\n\nexport default DhsArticle;\n","import React, { useState, useRef, useEffect, createRef, useCallback } from \"react\";\nimport {DhsArticleLink} from \"./TextLink\"\nimport {\n  useParams,\n  useLocation\n} from \"react-router-dom\";\nimport {Form, Button} from \"react-bootstrap\"\n\n\nimport {CenteredLayout} from \"./Layout\"\n\n\nconst NB_MAX_DISPLAYED_ARTICLES = 100\n\nexport function ArticlesListItem({articleTitle, dhsId}){\n  return <div className=\"dhs-articles-list-item\">\n    <DhsArticleLink dhsId={dhsId}>\n      <span className=\"dhs-articles-list-item-id\">{dhsId+\" \"}</span>\n      <span className=\"dhs-articles-list-item-title\">{articleTitle}</span>\n    </DhsArticleLink>\n  </div>\n}\n\nexport function searchInIndex(completeIndex, searchTerm){\n  const lowerCaseSearchTerm = searchTerm.toLowerCase()\n  return completeIndex.filter(aid => aid[1].toLowerCase().indexOf(lowerCaseSearchTerm)!=-1)\n}\n\n\nexport function ArticlesList({baseurl=\"\"}) {\n  const { language } = useParams();\n  console.log(\"ArticlesList.js language\", language)\n  \n  const indexJsonUrl = baseurl+\"/data/indices/\"+language+\".json\"\n\n  const [index, setIndex] = useState([])\n  const [completeIndex, setCompleteIndex] = useState([])\n\n  useEffect(()=>{\n    fetch(indexJsonUrl).then(x=>x.json()).then(index=>{\n      setCompleteIndex(index)\n      setIndex(index)\n    })\n  }, [indexJsonUrl])\n\n  const onSearchFormSubmit = (event)=>{\n    const searchTerm = document.getElementById('dhs-article-text-search').value\n    setIndex(searchInIndex(completeIndex, searchTerm))\n    event.preventDefault()\n    event.stopPropagation()\n  }\n\n  //console.log(\"ArticlesList indexJsonUrl: \", indexJsonUrl, \" index:\", index)\n\n  return (\n    <CenteredLayout>\n      <Form id=\"dhs-article-search\" onSubmit={onSearchFormSubmit}>\n        <Form.Group className=\"mb-3\" controlId=\"dhs-article-text-search\">\n          <Form.Control type=\"text\" placeholder=\"Search in articles' titles...\" />\n        </Form.Group>\n        <Button variant=\"primary\" type=\"submit\">\n          Search\n        </Button>\n      </Form>\n      {index.filter((a,i)=>i<NB_MAX_DISPLAYED_ARTICLES).map((item,i)=> <ArticlesListItem key={i} dhsId={item[0]} articleTitle={item[1]}/>)}\n    </CenteredLayout>\n  );\n}\n\nexport default ArticlesList;\n\n// <Form.Label>Search</Form.Label>\n/*\n\n*/","import React from \"react\";\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport {\n  HashRouter as Router,\n  Routes,\n  Route,\n  Navigate,\n  //Link\n  useLocation\n} from \"react-router-dom\";\n\nimport {DhsArticle} from \"./DhsArticle\"\nimport {ArticlesList} from \"./ArticlesList\"\n\nconst Route404 = ({tadu=\"DEFAULT\"})=><div>THIS IS A {tadu} ROUTE</div>\nexport default function Routing() {\n  return (\n    <>\n    <Router>\n      <Routes basename={process.env.PUBLIC_URL}>\n          <Route path=\"/:language/articles/:dhsId\" element={<DhsArticle baseurl={process.env.PUBLIC_URL}/>}/>\n          <Route path=\"/:language\" element={<ArticlesList  baseurl={process.env.PUBLIC_URL}/>}/>\n          <Route path=\"/:language/articles\" element={<ArticlesList  baseurl={process.env.PUBLIC_URL}/>}/>\n          <Route exact path=\"/\" element={<Navigate to=\"/fr\" />} />\n          <Route path='*' element={<Route404/>} />\n      </Routes>\n    </Router>\n    </>\n  );\n}\n//\n        ","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n//import App from \"./components/App\";\nimport Routing from \"./Routing\";\n\nReactDOM.render(\n      <Routing />,\n    document.getElementById(\"root\")\n);\n\n"],"sourceRoot":""}