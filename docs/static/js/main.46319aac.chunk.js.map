{"version":3,"sources":["TextLink.js","Navbar.js","Layout.js","DhsArticle.js","ArticlesList.js","Routing.js","index.js"],"names":["getLinkSubProperty","textLink","property","subproperty","undefined","getLinkAnnotationProperty","getLinkDhsId","dhsId","dhsid","href","dhsUrl","match","decomposeDhsUrl","getWikipediaUrlFromPageId","language","pageId","replace","dhsLinkClass","originalDhsLinkClass","wikipediaLinkClass","NoTextLink","className","children","noLinkClass","DhsArticleLink","originalLink","getDhsUrlFromDhsId","useParams","to","RealDhsArticleLink","url","getRealDhsUrlFromDhsId","target","WikipediaTextLink","WikidataTextLink","TextLink","textlink","origin","wikipediaUrl","getLinkWikipediaUrl","wikidataUrl","getLinkWikidataUrl","LanguageChooser","links","filter","l","map","urlToLng","window","location","pathname","NavDropdown","Item","toUpperCase","title","id","NavBarHeader","Navbar","bg","expand","Toggle","Collapse","Nav","Link","CenteredLayout","Container","Row","Col","lg","TextWithLinks","text","textLinks","length","sort","a","b","start","previousTextLink","end","textsAndLinks","i","previousTextLinkEnd","substring","console","warn","x","flat","push","TextBlock","tag","DhsArticleContent","article","text_blocks","search_result_name","textBlocks","tb","externalLinks","logoSize","wikipedia_page_title","wikidata_url","wikipediaLink","src","width","height","wikidataLink","text_links","DhsArticle","baseurl","articleJsonUrl","useState","setArticle","useEffect","fetch","then","json","newArticle","catch","lastArticle","log","Alert","variant","MissingDhsArticle","onClick","history","back","ArticlesListItem","articleTitle","ArticlesList","indexJsonUrl","index","setIndex","completeIndex","setCompleteIndex","Form","onSubmit","event","searchTerm","document","getElementById","value","lowerCaseSearchTerm","toLowerCase","aid","indexOf","searchInIndex","preventDefault","stopPropagation","Group","controlId","Control","type","placeholder","Button","item","Route404","tadu","Routing","basename","process","path","element","exact","ReactDOM","render"],"mappings":"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","file":"static/js/main.46319aac.chunk.js","sourcesContent":["import {\n    Link,\n    useParams\n  } from \"react-router-dom\";\n\n\n\n/*\n * Different text links:\n * - dhs-article\n * - wikipedia\n * - wikidata\n * \n * needs:\n * - triage between the 3 different types\n * - choose to force a priority order\n * - \n * \n * triage:\n * - dhsArticle: has .dhsid property\n * - wikidata: has .wiki.item not null property\n * - wikipedia: has .wiki.articleLNG not null property\n * - unidentified identity: none of the above\n * \n * \n * \n * \n */\n\nfunction getLinkSubProperty(textLink, property, subproperty){\n    if( textLink[property] &&\n        textLink[property][subproperty] &&\n        textLink[property][subproperty]!=\"\" &&\n        textLink[property][subproperty]!==undefined &&\n        textLink[property][subproperty]!==null\n    ){\n        return textLink[property][subproperty]        \n    }\n    return false\n\n}\n\nfunction getLinkWikiProperty(textLink, property){\n    return getLinkSubProperty(textLink,\"wiki\", property)\n}\n\nfunction getLinkAnnotationProperty(textLink, property){\n    return getLinkSubProperty(textLink,\"annotation\", property)\n}\n\n\nfunction getLinkAnnotationExtraField(textLink, extraField){\n    const extraFields = getLinkAnnotationProperty(textLink, \"extra_fields\")\n    return extraFields? extraFields[extraField] : false\n}\n\nexport function getDhsUrlFromDhsId(dhsId, language=\"de\"){\n    return (language? \"/\"+language : \"\")+\"/articles/\"+dhsId\n}\nexport function getRealDhsUrlFromDhsId(dhsId, language=\"de\"){\n    return \"https://hls-dhs-dss.ch\"+ (language? \"/\"+language : \"\")+\"/articles/\"+dhsId\n}\nexport function decomposeDhsUrl(dhsUrl){\n    const urlRegex = /\\/(\\w+)?\\/?articles\\/(.+?)\\/(\\d{4}-\\d{2}-\\d{2})?/\n    return dhsUrl.match(urlRegex) // 0: whole path, 1: language, 2: dhs id, 3: version\n}\nexport function getDhsIdFromDhsUrl(dhsUrl){\n    return decomposeDhsUrl(dhsUrl)[2]\n}\n\n/** dhsArticle: has .dhsid property\n * \n * @param {*} textLink \n * @returns {str or null}: this textLink dhs-id or false if no dhs id in this link (doesn't link to a dhs article)\n */\n export function getLinkDhsId(textLink){\n    let dhsId = textLink.dhsid && textLink.dhsid!=\"\" && textLink.dhsid!==undefined && textLink.dhsid!==null? textLink.dhsid : false\n    // if the dhsId field is missing, the dhsId is sometimes in the href field only\n    if(!dhsId){\n        dhsId = textLink.href && textLink.href!=\"\" && textLink.href!==undefined && textLink.href!==null? getDhsIdFromDhsUrl(textLink.href) : false    \n    }\n    return dhsId\n}\n/** dhsArticle: has .dhsid property\n * \n * @param {*} textLink \n * @returns {str or null}: this textLink dhs-id or false if no dhs id in this link (doesn't link to a dhs article)\n */\nexport function getLinkDhsUrl(textLink, language=false){\n    const dhsId = getLinkDhsId(textLink)\n    return dhsId? (language? \"/\"+language : \"\")+\"/articles/\"+dhsId : false\n}\n\nconst wikipediaBaseUrl = \"https://<LNG>.wikipedia.org/wiki/\"\nconst wikipediaBaseUrlFromPageId = \"https://<LNG>.wikipedia.org/?curid=\"\nexport const getWikipediaUrlFromPageId = (language, pageId) => wikipediaBaseUrlFromPageId.replace(\"<LNG>\",language)+pageId\n/**  wikipedia: has .wiki.articleLNG not null property\n * \n * @param {*} textLink \n * @returns {str or null}: this textLink wikipediaUrl or false if no wikipediaUrl in this link\n */\nexport function getLinkWikipediaUrl(textLink, language){\n    const pageId = getLinkAnnotationProperty(textLink, \"wikipedia_page_id\")\n    return pageId? getWikipediaUrlFromPageId(language, pageId) : false\n}\n\n/**  wikidata: has .wiki.item not null property\n * \n * @param {*} textLink \n * @returns {str or null}: this textLink wikidataUrl or false if no wikidataUrl in this link\n */\nexport function getLinkWikidataUrl(textLink){\n    return getLinkAnnotationProperty(textLink, \"wikidata_entity_url\")\n}\n\n\nexport const noLinkClass = \"no-text-link\"\nexport const dhsLinkClass = \"dhs-dhs-link\"\nexport const originalDhsLinkClass = \"dhs-original-dhs-link\"\nexport const realDhsLinkClass = \"dhs-real-dhs-link\"\nexport const wikipediaLinkClass = \"dhs-wikipedia-link\"\nexport const wikidataLinkClass = \"dhs-wikidata-link\"\n\n\nexport function NoTextLink({className=\"\", children=[]}){\n    return <span className={noLinkClass+\" \"+className}>{children}</span>\n}\n\n\n\nexport function DhsArticleTextLink({dhsUrl = \"\", children=[]}){\n    return <Link className={dhsLinkClass} to={dhsUrl}>{children}</Link>\n}\n\nexport function DhsArticleLink({dhsId = \"\", children=[], originalLink=false}){\n    const { language } = useParams();\n    const dhsUrl = getDhsUrlFromDhsId(dhsId, language)\n    return <Link className={dhsLinkClass+\" \"+(originalLink? originalDhsLinkClass: \"\")} to={dhsUrl}>{children}</Link>\n}\nexport function RealDhsArticleLink({dhsId = \"\", language=\"de\", children=[]}){\n    const url = getRealDhsUrlFromDhsId(dhsId, language)\n    return <a className={realDhsLinkClass} href={url} target=\"_blank\">{children}</a>\n}\n\n\n\nexport function WikipediaTextLink({url = \"\", children=[]}){\n    return <a className={wikipediaLinkClass} href={url} target=\"_blank\">{children}</a>\n}\n\n\n\nexport function WikidataTextLink({url = \"\", children=[]}){\n    return <a className={wikidataLinkClass} href={url} target=\"_blank\">{children}</a>\n}\n\n\n\nexport function TextLink({\n    textlink = {},\n    language=\"de\",\n    children = []\n}){\n    const textLink = textlink\n    //console.log(\"<TextLink/> textLink:\", textLink, \"\\nlanguage: \", language, \"\\nchildren: \", children,\"\\nzulu: \",zulu)\n    const dhsId = getLinkDhsId(textLink)\n    if(dhsId){\n        return <DhsArticleLink dhsId={dhsId} originalLink={textLink.origin!==\"entity_fishing\"}>{children}</DhsArticleLink>\n    }\n    /*const dhsUrl = getLinkDhsUrl(textLink, language)\n    if(dhsUrl){\n        return <DhsArticleTextLink dhsUrl={dhsUrl}>{children}</DhsArticleTextLink>\n    }*/\n    const wikipediaUrl = getLinkWikipediaUrl(textLink, language)\n    //console.log(\"TextLink no DHS id wikipediaUrl=\",wikipediaUrl, \"textLink.annotation.wikipedia_page_title: \",textLink.annotation.wikipedia_page_title, \"textLink.annotation.wikipedia_page_id: \",textLink.annotation.wikipedia_page_id)\n    if(wikipediaUrl){\n        return <WikipediaTextLink url={wikipediaUrl}>{children}</WikipediaTextLink>\n    }\n    const wikidataUrl = getLinkWikidataUrl(textLink)\n    if(wikidataUrl){\n        return <WikidataTextLink url={wikidataUrl}>{children}</WikidataTextLink>\n    }\n    return <NoTextLink>{children}</NoTextLink>\n}\n\n\n\n/* TEXT LINK EXAMPLE (with all options present):\n{\n    \"start\": 271,\n    \"end\": 276,\n    \"mention\": null,\n    \"origin\": \"entity_fishing\",\n    \"annotation\": {\n        \"wikidata_entity_id\": \"Q14274\",\n        \"wikipedia_page_id\": 168146,\n        \"wikipedia_page_title\": null,\n        \"wikidata_entity_url\": \"http://www.wikidata.org/entity/Q14274\",\n        \"grobid_tag\": null,\n        \"extra_fields\": {\n            \"rawName\": \"protestants\",\n            \"confidence_score\": 0.6095,\n            \"domains\": [\n                \"Sociology\",\n                \"Computer_Science\"\n            ],\n            \"origin\": \"entity_fishing\"\n        }\n    },\n    \"href\": \"fr/articles/001620\",\n    \"dhsid\": \"001620\",\n    \"wiki\": {\n        \"item\": \"http://www.wikidata.org/entity/Q14274\",\n        \"itemLabel\": \"Aarau\",\n        \"dhsid\": \"001620\",\n        \"namefr\": \"Aarau\",\n        \"articlefr\": \"https://fr.wikipedia.org/wiki/Aarau\",\n        \"namede\": \"Aarau\",\n        \"articlede\": \"https://de.wikipedia.org/wiki/Aarau\",\n        \"nameit\": \"Aarau\",\n        \"articleit\": \"https://it.wikipedia.org/wiki/Aarau\",\n        \"nameen\": \"Aarau\",\n        \"articleen\": \"https://en.wikipedia.org/wiki/Aarau\",\n        \"instanceof\": \"http://www.wikidata.org/entity/Q14770218\",\n        \"instanceofLabel\": \"capitale cantonale de Suisse\",\n        \"gndid\": \"4000018-7\",\n        \"wikidata_id\": \"Q14274\"\n    }\n},\n\n*/","import React from 'react'\nimport {Navbar, Nav, NavDropdown} from 'react-bootstrap'\nimport {LinkContainer} from 'react-router-bootstrap'\nimport {\n    Link,\n    useParams\n} from \"react-router-dom\";\n\nconst LanguageChooser = ({}) => {\n    const possibleLanguages = [\"de\", \"fr\", \"it\"]\n    const { language } = useParams();\n\n    const links = possibleLanguages.filter(l=>l!= language).map(l=>{\n            const urlToLng = window.location.pathname.replace(language,l)\n            return  <LinkContainer key={l} to={urlToLng}>\n                        <NavDropdown.Item>{l.toUpperCase()}</NavDropdown.Item>\n                    </LinkContainer>\n        }\n    )\n    return <NavDropdown className=\"language-chooser\" title={language.toUpperCase()} id=\"basic-nav-dropdown\">\n            {links}\n        </NavDropdown>\n}\n\nconst NavBarHeader = () => {\n    const { language, dhsId } = useParams();\n    //console.log(\"NavBarHeader, language: \", language, \", dhsId: \", dhsId, \"window.location.pathname=\",window.location.pathname)\n    return (\n        <Navbar bg=\"light\" expand=\"lg\">\n            <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n            <Navbar.Collapse id=\"basic-navbar-nav\">\n                <Nav className=\"mr-auto\">\n                    <LinkContainer to={\"/\"+language+\"/articles\"}>\n                        <Nav.Link>Articles</Nav.Link>\n                  </LinkContainer>\n                  <LanguageChooser/>\n                </Nav>\n            </Navbar.Collapse>\n        </Navbar>\n    )\n}\n\nexport default NavBarHeader","import React from \"react\";\nimport {Container, Row, Col} from \"react-bootstrap\"\nimport NavBarHeader from \"./Navbar.js\"\n\nimport \"./style.scss\"\n\nexport function CenteredLayout({children}){\n\n    return (\n      <div className=\"main\">\n        <NavBarHeader/>\n        <Container className=\"centered-article-container\">\n          <Row className=\"justify-content-md-center\">\n            <Col lg=\"7\" className=\"justify-content-md-center centered-article-content\">\n                {children}\n            </Col>\n          </Row>\n        </Container>\n      </div>\n    );\n  }","import React, { useState, useRef, useEffect, createRef, useCallback } from \"react\";\nimport {\n  useParams\n} from \"react-router-dom\";\nimport {Alert} from \"react-bootstrap\"\n\nimport {TextLink, WikidataTextLink, WikipediaTextLink, realDhsLink, RealDhsArticleLink, getWikipediaUrlFromPageId, dhsLinkClass, wikipediaLinkClass, originalDhsLinkClass} from \"./TextLink\"\nimport {CenteredLayout} from \"./Layout\"\n\n\n\n\nfunction TextWithLinks({text, textLinks=[], language=\"de\"}){\n    if(textLinks.length==0){\n        return text\n    }\n    //console.log(\"textLinks: \", textLinks)\n    textLinks.sort((a,b) => a.start-b.start)\n    let previousTextLink = {start:0, end: 0}\n    const textsAndLinks = textLinks.map((textLink,i) =>{\n        //console.log(\"textsAndLinks mapping\\npreviousTextLink:\", previousTextLink, \"\\ntextLink: \",textLink)\n        if(textLink.start>=previousTextLink.end){\n            const previousTextLinkEnd = previousTextLink.end\n            previousTextLink = textLink\n            //console.log(\"textsAndLinks mapping bis, textLink: \",textLink)\n            return [\n                text.substring(previousTextLinkEnd, textLink.start),\n                <TextLink textlink={textLink} language={language} key={i}>{text.substring(textLink.start, textLink.end)}</TextLink>\n            ]\n        }else{\n            console.warn(\"Overlapping text links\\npreviousTextLink:\", previousTextLink, \"\\ntextLink: \",textLink)\n        }\n        return false\n    }).filter(x=>x).flat()\n    textsAndLinks.push(text.substring(previousTextLink.end, text.length))\n    return textsAndLinks\n}\n\nfunction TextBlock({tag=\"p\", textLinks = [], children=\"\", language=\"de\"}){\n    const text = children[0]\n\n    //const textWithLinks = []\n    switch(tag) {\n        case \"h1\":\n            return <h1>{children}</h1>\n        case \"h2\":\n            return <h2>{children}</h2>\n        case \"h3\":\n            return <h3>{children}</h3>\n        case \"h4\":\n            return <h4>{children}</h4>\n        case \"p\":\n            return <p><TextWithLinks text={text} textLinks={textLinks} language={language}/></p>\n        default:\n            return <div><TextWithLinks text={text} textLinks={textLinks} language={language}/></div>\n      } \n}\n\nexport function DhsArticleContent({\n    article = {},\n    language=\"de\"\n}) {    \n    //\"wikidata_url\": \"http://www.wikidata.org/entity/Q121410\",\n    //\"wikipedia_page_title\": \"District d'Aarau\",\n\n    // hack: use the search_result_name to have a nice title\n    if(article.text_blocks && article.text_blocks.length>0){\n        article.text_blocks[0][1] = article.search_result_name\n    }\n\n    const textBlocks = article.text_blocks? article.text_blocks.map((tb,i)=>{\n        const [tag, text] = tb\n\n        // adding links to DHS, WK, WD to first block, the title\n        let externalLinks=\"\"\n        if(i==0){\n            const logoSize = \"20px\" \n            const wikipediaUrl = article.wikipedia_page_title? getWikipediaUrlFromPageId(language, article.wikipedia_page_title):false\n            const wikidataUrl = article.wikidata_url? article.wikidata_url:false\n            const wikipediaLink = wikipediaUrl? <WikipediaTextLink key=\"wk-tl\" url={wikipediaUrl}><img src=\"/wikipedia.png\" width={logoSize} height={logoSize} /></WikipediaTextLink>:\"\"\n            const wikidataLink = wikidataUrl? <WikidataTextLink key=\"wdt-l\" url={wikidataUrl}><img src=\"/wikidata.svg\" width={logoSize} height={logoSize} /></WikidataTextLink>: \"\"\n            externalLinks = <span>\n                <RealDhsArticleLink key=\"r-dhs-tl\" dhsId={article.id} language={language}> <img src=\"/hds.png\" className=\"real-dhs-article-external-link\" width={logoSize} height={logoSize} /></RealDhsArticleLink>\n                {wikipediaLink}\n                {wikidataLink}\n            </span>\n        }\n        return <TextBlock tag={tag} key={i} textLinks={article.text_links[i]} language={language}>{[text,\" \",externalLinks]}</TextBlock>\n    }) : \"Loading...\"\n\n    return (\n        <div className=\"dhs-article\">\n            {textBlocks}\n        </div>\n    );\n}\n//{}\n\n\n\nexport function DhsArticle({baseurl=\"\"}) {\n\n  const { language, dhsId } = useParams();\n\n  const articleJsonUrl = baseurl+\"/data/\"+language+\"/\"+dhsId+\".json\"\n\n  const [article, setArticle] = useState({id:true})\n\n  useEffect(()=>{\n    fetch(articleJsonUrl).then(x=>x.json()).then(newArticle=>{\n        //article.lastArticle = {id: article.lastArticle? article.lastArticle.id}\n        //newArticle.lastArticle = article\n        setArticle(newArticle)\n    }).catch(x=>{\n        console.warn(\"DhsArticle problem loading article: \", x)\n        setArticle({lastArticle: article})\n    })\n  }, [articleJsonUrl])\n\n  console.log(\"DhsArticle.js language\", language, \"dhsId:\", dhsId, \", article:\", article)\n  if(!article.id){\n      return <MissingDhsArticle lastArticle={article.lastArticle}/>\n  }\n\n  return (\n    <CenteredLayout>\n        <Alert className=\"dhs-article-info\" variant=\"info\">\n            <a className={dhsLinkClass}>Les liens bleus</a> pointent vers d'autres articles du DHS.<br/>\n            <a className={wikipediaLinkClass}>Les liens verts</a> pointent vers Wikipedia.<br/>\n            <a className={dhsLinkClass+\" \"+originalDhsLinkClass}>Les liens bleus souligné en traitillé</a> sont des liens provenant du DHS original.<br/>\n        </Alert>\n        <DhsArticleContent article={article} language={language}/>\n    </CenteredLayout>\n  );\n}\n\nexport function MissingDhsArticle({lastArticle={}}) {\n  const { language, dhsId } = useParams();\n  //console.log(\"MissingDhsArticle.js language\", language, \"dhsId:\", dhsId, \"lastArticle.id: \", lastArticle.id)\n\n  return (\n    <CenteredLayout>\n        <h1>Error 404: Article not found</h1>\n        <p>\n            Oops, it seems this article is missing. Are you sure the article id is correct?<br/>\n        </p>\n        <p>\n            <a href=\"#\" onClick={()=>window.history.back()}>Revenir en arrière {lastArticle.title? \"(\"+lastArticle.title+\")\":\"\"}</a>\n        </p>\n        {dhsId?\n        <p>\n            <RealDhsArticleLink dhsId={dhsId} language={language}>Visiter l'article du DHS original</RealDhsArticleLink>\n        </p>: \"\"}\n        \n    </CenteredLayout>\n  );\n}\n\nexport default DhsArticle;\n","import React, { useState, useRef, useEffect, createRef, useCallback } from \"react\";\nimport {DhsArticleLink} from \"./TextLink\"\nimport {\n  useParams,\n  useLocation\n} from \"react-router-dom\";\nimport {Form, Button} from \"react-bootstrap\"\n\n\nimport {CenteredLayout} from \"./Layout\"\n\n\nconst NB_MAX_DISPLAYED_ARTICLES = 100\n\nexport function ArticlesListItem({articleTitle, dhsId}){\n  return <div className=\"dhs-articles-list-item\">\n    <DhsArticleLink dhsId={dhsId}>\n      <span className=\"dhs-articles-list-item-id\">{dhsId+\" \"}</span>\n      <span className=\"dhs-articles-list-item-title\">{articleTitle}</span>\n    </DhsArticleLink>\n  </div>\n}\n\nexport function searchInIndex(completeIndex, searchTerm){\n  const lowerCaseSearchTerm = searchTerm.toLowerCase()\n  return completeIndex.filter(aid => aid[1].toLowerCase().indexOf(lowerCaseSearchTerm)!=-1)\n}\n\n\nexport function ArticlesList({baseurl=\"\"}) {\n  const { language } = useParams();\n  console.log(\"ArticlesList.js language\", language)\n  \n  const indexJsonUrl = baseurl+\"/data/indices/\"+language+\".json\"\n\n  const [index, setIndex] = useState([])\n  const [completeIndex, setCompleteIndex] = useState([])\n\n  useEffect(()=>{\n    fetch(indexJsonUrl).then(x=>x.json()).then(index=>{\n      setCompleteIndex(index)\n      setIndex(index)\n    })\n  }, [indexJsonUrl])\n\n  const onSearchFormSubmit = (event)=>{\n    const searchTerm = document.getElementById('dhs-article-text-search').value\n    setIndex(searchInIndex(completeIndex, searchTerm))\n    event.preventDefault()\n    event.stopPropagation()\n  }\n\n  //console.log(\"ArticlesList indexJsonUrl: \", indexJsonUrl, \" index:\", index)\n\n  return (\n    <CenteredLayout>\n      <Form id=\"dhs-article-search\" onSubmit={onSearchFormSubmit}>\n        <Form.Group className=\"mb-3\" controlId=\"dhs-article-text-search\">\n          <Form.Control type=\"text\" placeholder=\"Search in articles' titles...\" />\n        </Form.Group>\n        <Button variant=\"primary\" type=\"submit\">\n          Search\n        </Button>\n      </Form>\n      {index.filter((a,i)=>i<NB_MAX_DISPLAYED_ARTICLES).map((item,i)=> <ArticlesListItem key={i} dhsId={item[0]} articleTitle={item[1]}/>)}\n    </CenteredLayout>\n  );\n}\n\nexport default ArticlesList;\n\n// <Form.Label>Search</Form.Label>\n/*\n\n*/","import React from \"react\";\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport {\n  HashRouter as Router,\n  Routes,\n  Route,\n  Navigate,\n  //Link\n  useLocation\n} from \"react-router-dom\";\n\nimport {DhsArticle} from \"./DhsArticle\"\nimport {ArticlesList} from \"./ArticlesList\"\n\nconst Route404 = ({tadu=\"DEFAULT\"})=><div>THIS IS A {tadu} ROUTE</div>\nexport default function Routing() {\n  return (\n    <>\n    <Router>\n      <Routes basename={process.env.PUBLIC_URL}>\n          <Route path=\"/:language/articles/:dhsId\" element={<DhsArticle baseurl={process.env.PUBLIC_URL}/>}/>\n          <Route path=\"/:language\" element={<ArticlesList  baseurl={process.env.PUBLIC_URL}/>}/>\n          <Route path=\"/:language/articles\" element={<ArticlesList  baseurl={process.env.PUBLIC_URL}/>}/>\n          <Route exact path=\"/\" element={<Navigate to=\"/fr\" />} />\n          <Route path='*' element={<Route404/>} />\n      </Routes>\n    </Router>\n    </>\n  );\n}\n//\n        ","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n//import App from \"./components/App\";\nimport Routing from \"./Routing\";\n\nReactDOM.render(\n      <Routing />,\n    document.getElementById(\"root\")\n);\n\n"],"sourceRoot":""}