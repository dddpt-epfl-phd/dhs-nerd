(this["webpackJsonpdhs-nerd-frontend"]=this["webpackJsonpdhs-nerd-frontend"]||[]).push([[0],{80:function(e,t,n){},81:function(e,t,n){"use strict";n.r(t);var i=n(0),r=n(24),s=n.n(r),a=(n(71),n(25)),c=n(7),l=n(6),d=n(89),o=n(1);function h(e,t,n){return!(!e[t]||!e[t][n]||""==e[t][n]||void 0===e[t][n]||null===e[t][n])&&e[t][n]}function j(e,t){return h(e,"annotation",t)}function u(e){var t=!(!e.dhsid||""==e.dhsid||void 0===e.dhsid||null===e.dhsid)&&e.dhsid;return t||(t=!(!e.href||""==e.href||void 0===e.href||null===e.href)&&function(e){return e.match(/\/(\w+)?\/?articles\/(.+?)\/(\d{4}-\d{2}-\d{2})?/)}(e.href)[2]),t}var b=function(e,t){return"https://<LNG>.wikipedia.org/?curid=".replace("<LNG>",e)+t};var x="dhs-dhs-link",O="dhs-original-dhs-link",g="dhs-wikipedia-link";function v(e){var t=e.className,n=void 0===t?"":t,i=e.children,r=void 0===i?[]:i;return Object(o.jsx)("span",{className:"no-text-link "+n,children:r})}function f(e){var t=e.dhsId,n=void 0===t?"":t,i=e.children,r=void 0===i?[]:i,s=e.originalLink,l=void 0!==s&&s,d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"de";return(t?"/"+t:"")+"/articles/"+e}(n,Object(c.x)().language);return Object(o.jsx)(a.Link,{className:"dhs-dhs-link "+(l?O:""),to:d,children:r})}function p(e){var t=e.dhsId,n=void 0===t?"":t,i=e.language,r=void 0===i?"de":i,s=e.children,a=void 0===s?[]:s,c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"de";return"https://hls-dhs-dss.ch"+(t?"/"+t:"")+"/articles/"+e}(n,r);return Object(o.jsx)("a",{className:"dhs-real-dhs-link",href:c,target:"_blank",children:a})}function m(e){var t=e.url,n=void 0===t?"":t,i=e.children,r=void 0===i?[]:i;return Object(o.jsx)("a",{className:g,href:n,target:"_blank",children:r})}function k(e){var t=e.url,n=void 0===t?"":t,i=e.children,r=void 0===i?[]:i;return Object(o.jsx)("a",{className:"dhs-wikidata-link",href:n,target:"_blank",children:r})}function w(e){var t=e.textlink,n=void 0===t?{}:t,i=e.language,r=void 0===i?"de":i,s=e.children,a=void 0===s?[]:s,c=n,l=u(c);if(l)return Object(o.jsx)(f,{dhsId:l,originalLink:"entity_fishing"!==c.origin,children:a});var d=function(e,t){var n=j(e,"wikipedia_page_id");return!!n&&b(t,n)}(c,r);if(d)return Object(o.jsx)(m,{url:d,children:a});var h=function(e){return j(e,"wikidata_entity_url")}(c);return h?(console.log("TextLink WIKIDATA! wikidataUrl=",h," text:",a),Object(o.jsx)(k,{url:h,children:a})):Object(o.jsx)(v,{children:a})}var L=n(87),N=n(88),I=n(64),A=n(61),_=n(90),D=n(91),y=n(93),S=n(59),T=function(e){Object(A.a)(e);var t=Object(c.x)().language,n=["de","fr","it"].filter((function(e){return e!=t})).map((function(e){var n=window.location.pathname.replace(t,e);return Object(o.jsx)(S.LinkContainer,{to:n,children:Object(o.jsx)(_.a.Item,{children:e.toUpperCase()})},e)}));return Object(o.jsx)(_.a,{className:"language-chooser",title:t.toUpperCase(),id:"basic-nav-dropdown",children:n})},C=function(){var e=Object(c.x)(),t=e.language;e.dhsId;return Object(o.jsxs)(D.a,{bg:"light",expand:"lg",children:[Object(o.jsx)(D.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(o.jsx)(D.a.Collapse,{id:"basic-navbar-nav",children:Object(o.jsxs)(y.a,{className:"mr-auto",children:[Object(o.jsx)(S.LinkContainer,{to:"/"+t+"/articles",children:Object(o.jsx)(y.a.Link,{children:"Articles"})}),Object(o.jsx)(T,{})]})})]})};n(80);function U(e){var t=e.children;return Object(o.jsxs)("div",{className:"main",children:[Object(o.jsx)(C,{}),Object(o.jsx)(L.a,{className:"centered-article-container",children:Object(o.jsx)(N.a,{className:"justify-content-md-center",children:Object(o.jsx)(I.a,{lg:"7",className:"justify-content-md-center centered-article-content",children:t})})})]})}function E(e){var t=e.text,n=e.textLinks,i=void 0===n?[]:n,r=e.language,s=void 0===r?"de":r;if(0==i.length)return t;i.sort((function(e,t){return e.start-t.start}));var a={start:0,end:0},c=i.map((function(e,n){if(e.start>=a.end){var i=a.end;return a=e,[t.substring(i,e.start),Object(o.jsx)(w,{textlink:e,language:s,children:t.substring(e.start,e.end)},n)]}return console.warn("Overlapping text links\npreviousTextLink:",a,"\ntextLink: ",e),!1})).filter((function(e){return e})).flat();return c.push(t.substring(a.end,t.length)),c}function G(e){var t=e.tag,n=void 0===t?"p":t,i=e.textLinks,r=void 0===i?[]:i,s=e.children,a=void 0===s?"":s,c=e.language,l=void 0===c?"de":c,d=a[0];switch(n){case"h1":return Object(o.jsx)("h1",{children:a});case"h2":return Object(o.jsx)("h2",{children:a});case"h3":return Object(o.jsx)("h3",{children:a});case"h4":return Object(o.jsx)("h4",{children:a});case"p":return Object(o.jsx)("p",{children:Object(o.jsx)(E,{text:d,textLinks:r,language:l})});default:return Object(o.jsx)("div",{children:Object(o.jsx)(E,{text:d,textLinks:r,language:l})})}}function H(e){var t=e.article,n=void 0===t?{}:t,i=e.language,r=void 0===i?"de":i;n.text_blocks&&n.text_blocks.length>0&&(n.text_blocks[0][1]=n.search_result_name);var s=n.text_blocks?n.text_blocks.map((function(e,t){var i=Object(l.a)(e,2),s=i[0],a=i[1],c="";if(0==t){var d="20px",h=!!n.wikipedia_page_title&&b(r,n.wikipedia_page_title),j=!!n.wikidata_url&&n.wikidata_url,u=h?Object(o.jsx)(m,{url:h,children:Object(o.jsx)("img",{src:"/wikipedia.png",width:d,height:d})},"wk-tl"):"",x=j?Object(o.jsx)(k,{url:j,children:Object(o.jsx)("img",{src:"/wikidata.svg",width:d,height:d})},"wdt-l"):"";c=Object(o.jsxs)("span",{children:[Object(o.jsxs)(p,{dhsId:n.id,language:r,children:[" ",Object(o.jsx)("img",{src:"/hds.png",className:"real-dhs-article-external-link",width:d,height:d})]},"r-dhs-tl"),u,x]})}return Object(o.jsx)(G,{tag:s,textLinks:n.text_links[t],language:r,children:[a," ",c]},t)})):"Loading...";return Object(o.jsx)("div",{className:"dhs-article",children:s})}function R(e){var t=e.baseurl,n=void 0===t?"":t;console.log("DhsArticle DhsArticle DhsArticle DhsArticle");var r=Object(c.x)(),s=r.language,a=r.dhsId,h=n+"/data/"+s+"/"+a+".json",j=Object(i.useState)({id:!0}),u=Object(l.a)(j,2),b=u[0],O=u[1];return Object(i.useEffect)((function(){fetch(h).then((function(e){return e.json()})).then((function(e){O(e)})).catch((function(e){console.warn("DhsArticle problem loading article: ",e),O({lastArticle:b})}))}),[h]),console.log("DhsArticle.js language",s,"dhsId:",a,", article:",b),b.id?Object(o.jsxs)(U,{children:[Object(o.jsxs)(d.a,{className:"dhs-article-info",variant:"info",children:[Object(o.jsx)("a",{className:x,children:"Les liens bleus"})," pointent vers d'autres articles du DHS.",Object(o.jsx)("br",{}),Object(o.jsx)("a",{className:g,children:"Les liens verts"})," pointent vers Wikipedia.",Object(o.jsx)("br",{}),Object(o.jsx)("a",{className:"dhs-dhs-link dhs-original-dhs-link",children:"Les liens bleus soulign\xe9 en traitill\xe9"})," sont des liens provenant du DHS original.",Object(o.jsx)("br",{})]}),Object(o.jsx)(H,{article:b,language:s})]}):Object(o.jsx)(B,{lastArticle:b.lastArticle})}function B(e){var t=e.lastArticle,n=void 0===t?{}:t,i=Object(c.x)(),r=i.language,s=i.dhsId;return Object(o.jsxs)(U,{children:[Object(o.jsx)("h1",{children:"Erreur 404: Article pas encore trait\xe9"}),Object(o.jsx)("p",{children:"Cet article n'a pas encore \xe9t\xe9 link\xe9 par entity-fishing. La moulinette tourne, revenez plus tard."}),Object(o.jsx)("p",{children:Object(o.jsxs)("a",{href:"#",onClick:function(){return window.history.back()},children:["Revenir en arri\xe8re ",n.title?"("+n.title+")":""]})}),s?Object(o.jsx)("p",{children:Object(o.jsx)(p,{dhsId:s,language:r,children:"Visiter l'article du DHS original"})}):""]})}var F=n(92),J=n(62);function W(e){var t=e.articleTitle,n=e.dhsId;return Object(o.jsx)("div",{className:"dhs-articles-list-item",children:Object(o.jsxs)(f,{dhsId:n,children:[Object(o.jsx)("span",{className:"dhs-articles-list-item-id",children:n+" "}),Object(o.jsx)("span",{className:"dhs-articles-list-item-title",children:t})]})})}function z(e){var t=e.baseurl,n=void 0===t?"":t;console.log("ArticlesList ArticlesList ArticlesList ArticlesList");var r=Object(c.r)();console.log("ArticlesList location.pathname: ",r.pathname);var s=Object(c.x)().language;console.log("ArticlesList.js language",s);var a=n+"/data/indices/"+s+".json",d=Object(i.useState)([]),h=Object(l.a)(d,2),j=h[0],u=h[1],b=Object(i.useState)([]),x=Object(l.a)(b,2),O=x[0],g=x[1];Object(i.useEffect)((function(){fetch(a).then((function(e){return e.json()})).then((function(e){g(e),u(e)}))}),[a]);return Object(o.jsxs)(U,{children:[Object(o.jsxs)(F.a,{id:"dhs-article-search",onSubmit:function(e){var t=document.getElementById("dhs-article-text-search").value;u(function(e,t){var n=t.toLowerCase();return e.filter((function(e){return-1!=e[1].toLowerCase().indexOf(n)}))}(O,t)),e.preventDefault(),e.stopPropagation()},children:[Object(o.jsx)(F.a.Group,{className:"mb-3",controlId:"dhs-article-text-search",children:Object(o.jsx)(F.a.Control,{type:"text",placeholder:"Search in articles' titles..."})}),Object(o.jsx)(J.a,{variant:"primary",type:"submit",children:"Search"})]}),j.filter((function(e,t){return t<100})).map((function(e,t){return Object(o.jsx)(W,{dhsId:e[0],articleTitle:e[1]},t)}))]})}console.log("ROOOOOOUUUUTING, basename is: ","/dhs-nerd");var K=function(e){var t=e.tadu,n=void 0===t?"DEFAULT":t;return Object(o.jsxs)("div",{children:["THIS IS A ",n," ROUTE"]})};function P(){return console.log("doin' the routin', basename is: ","/dhs-nerd"),console.log("ROOUTING window.location.hash: ",window.location.hash),Object(o.jsx)(o.Fragment,{children:Object(o.jsx)(a.HashRouter,{children:Object(o.jsxs)(c.f,{basename:"/dhs-nerd",children:[Object(o.jsx)(c.d,{path:"/:language/articles/:dhsId",element:Object(o.jsx)(R,{baseurl:"/dhs-nerd"})}),Object(o.jsx)(c.d,{path:"/:language",element:Object(o.jsx)(z,{baseurl:"/dhs-nerd"})}),Object(o.jsx)(c.d,{path:"/:language/articles",element:Object(o.jsx)(z,{baseurl:"/dhs-nerd"})}),Object(o.jsx)(c.d,{exact:!0,path:"/",element:Object(o.jsx)(c.b,{to:"/fr"})}),Object(o.jsx)(c.d,{path:"*",element:Object(o.jsx)(K,{})})]})})})}s.a.render(Object(o.jsx)(P,{}),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.2064c6fb.chunk.js.map